!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/codebase/",n(n.s=27)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={getConfig:function(){return new Promise((function(e,t){webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get("/config").then((function(t){e(t.json())})).catch((function(e){t(e)}))}))},getConfigMysql:function(){return new Promise((function(e,t){webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get("/config").then((function(t){e(t.json())})).catch((function(e){t(e)}))}))},getVersion:function(){return new Promise((function(e,t){webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get("/version").then((function(t){e(t.json())})).catch((function(e){t(e)}))}))}}},function(e,t,n){"use strict";n.d(t,"d",(function(){return U})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return b}));var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function e(){a(this,e)},c=function(){function e(t){a(this,e),this.webixJet=!0,this.webix=t,this._events=[],this._subs={},this._data={}}return e.prototype.getRoot=function(){return this._root},e.prototype.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},e.prototype.setParam=function(e,t,n){if(this._data[e]!==t&&(this._data[e]=t,this._segment.update(e,t,0),n))return this.show(null)},e.prototype.getParam=function(e,t){var n=this._data[e];if(void 0!==n||!t)return n;var i=this.getParentView();return i?i.getParam(e,t):void 0},e.prototype.getUrl=function(){return this._segment.suburl()},e.prototype.getUrlString=function(){return this._segment.toString()},e.prototype.getParentView=function(){return this._parent},e.prototype.$$=function(e){if("string"==typeof e){var t=this.getRoot();return t.queryView((function(n){return(n.config.id===e||n.config.localId===e)&&n.$scope===t.$scope}),"self")}return e},e.prototype.on=function(e,t,n){var i=e.attachEvent(t,n);return this._events.push({obj:e,id:i}),i},e.prototype.contains=function(e){for(var t in this._subs){var n=this._subs[t].view;if(n===e||n.contains(e))return!0}return!1},e.prototype.getSubView=function(e){var t=this.getSubViewInfo(e);if(t)return t.subview.view},e.prototype.getSubViewInfo=function(e){var t=this._subs[e||"default"];return t?{subview:t,parent:this}:"_top"===e?(this._subs[e]={url:"",id:null,popup:!0},this.getSubViewInfo(e)):this._parent?this._parent.getSubViewInfo(e):null},e.prototype._detachEvents=function(){for(var e=this._events,t=e.length-1;t>=0;t--)e[t].obj.detachEvent(e[t].id)},e.prototype._destroySubs=function(){for(var e in this._subs){var t=this._subs[e].view;t&&t.destructor()}this._subs={}},e.prototype._init_url_data=function(){var e=this._segment.current();this._data={},this.webix.extend(this._data,e.params,!0)},e.prototype._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var e in this._subs){var t=this._subs[e];if(!t.branch&&t.view&&"_top"!==e){var n=t.view._getDefaultSub();if(n)return n}}},e.prototype._routed_view=function(){var e=this.getParentView();if(!e)return!0;var t=e._getDefaultSub();return!(!t&&t!==this)&&e._routed_view()},e}();function u(e){"/"===e[0]&&(e=e.substr(1));for(var t=e.split("/"),n=[],i=0;i<t.length;i++){var r=t[i],o={},a=r.indexOf(":");if(-1===a&&(a=r.indexOf("?")),-1!==a){var s=r.substr(a+1).split(/[\:\?\&]/g),c=Array.isArray(s),u=0;for(s=c?s:s[Symbol.iterator]();;){var l;if(c){if(u>=s.length)break;l=s[u++]}else{if((u=s.next()).done)break;l=u.value}var f=l.split("=");o[f[0]]=decodeURIComponent(f[1])}}n[i]={page:a>-1?r.substr(0,a):r,params:o,isNew:!0}}return n}function l(e){var t=[],n=e,i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}var a=o;t.push("/"+a.page);var s=f(a.params);s&&t.push("?"+s)}return t.join("")}function f(e){var t=[];for(var n in e)t.length&&t.push("&"),t.push(n+"="+encodeURIComponent(e[n]));return t.join("")}var p=function(){function e(t,n){a(this,e),this._next=1,this.route="string"==typeof t?{url:u(t),path:t}:t,this.index=n}return e.prototype.current=function(){return this.route.url[this.index]},e.prototype.next=function(){return this.route.url[this.index+this._next]},e.prototype.suburl=function(){return this.route.url.slice(this.index)},e.prototype.shift=function(){return new e(this.route,this.index+this._next)},e.prototype.refresh=function(){for(var e=this.route.url,t=this.index+1;t<e.length;t++)e[t].isNew=!0},e.prototype.toString=function(){var e=l(this.suburl());return e?e.substr(1):""},e.prototype._join=function(e,t){var n=this.route.url;if(null===e)return n;var i=this.route.url;if(n=i.slice(0,this.index+(t?this._next:0)),e){n=n.concat(u(e));for(var r=0;r<n.length;r++)i[r]&&(n[r].view=i[r].view),i[r]&&n[r].page===i[r].page&&(n[r].isNew=!1)}return n},e.prototype.append=function(e){var t=this._join(e,!0);return this.route.path=l(t),this.route.url=t,this.route.path},e.prototype.show=function(e,t,n){var i=this,r=this._join(e,n);return new Promise((function(e,n){var o=l(r),a={url:r,redirect:o,confirm:Promise.resolve()},c=t?t.app:null;if(c&&!c.callEvent("app:guard",[a.redirect,t,a]))return void n(new s);a.confirm.catch((function(e){return n(e)})).then((function(){if(null!==a.redirect){if(a.redirect!==o)return c.show(a.redirect),void n(new s);i.route.path=o,i.route.url=r,e()}else n(new s)}))}))},e.prototype.size=function(e){this._next=e},e.prototype.split=function(){var t={url:this.route.url.slice(this.index+1),path:""};return t.url.length&&(t.path=l(t.url)),new e(t,0)},e.prototype.update=function(e,t,n){var i=this.route.url[this.index+(n||0)];if(!i)return this.route.url.push({page:"",params:{}}),this.update(e,t,n);""===e?i.page=t:i.params[e]=t,this.route.path=l(this.route.url)},e}(),h=function(e){function t(n,i){a(this,t);var o=r(this,e.call(this,n.webix));return o.app=n,o._children=[],o}return o(t,e),t.prototype.ui=function(e,t){var n=(t=t||{}).container||e.container,r=this.app.createView(e);return this._children.push(r),r.render(n,this._segment,this),"object"!==(void 0===e?"undefined":i(e))||e instanceof c?r:r.getRoot()},t.prototype.show=function(e,t){if(t=t||{},"object"===(void 0===e?"undefined":i(e))){for(var n in e)this.setParam(n,e[n]);e=null}else{if("/"===e.substr(0,1))return this.app.show(e);if(0===e.indexOf("./")&&(e=e.substr(2)),0===e.indexOf("../")){var r=this.getParentView();return r?r.show(e.substr(3),t):this.app.show("/"+e.substr(3))}var o=this.getSubViewInfo(t.target);if(o){if(o.parent!==this)return o.parent.show(e,t);if(t.target&&"default"!==t.target)return this._renderFrameLock(t.target,o.subview,e)}else if(e)return this.app.show("/"+e)}return this._show(this._segment,e,this)},t.prototype._show=function(e,t,n){var i=this;return e.show(t,n,!0).then((function(){return i._init_url_data(),i._urlChange()})).then((function(){e.route.linkRouter&&(i.app.getRouter().set(e.route.path,{silent:!0}),i.app.callEvent("app:route",[e.route.path]))}))},t.prototype.init=function(e,t){},t.prototype.ready=function(e,t){},t.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},t.prototype.urlChange=function(e,t){},t.prototype.destroy=function(){},t.prototype.destructor=function(){this.destroy(),this._destroyKids(),this._root.destructor(),e.prototype.destructor.call(this)},t.prototype.use=function(e,t){e(this.app,this,t)},t.prototype.refresh=function(){this.getUrl();return this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},t.prototype.render=function(e,t,n){var i=this;"string"==typeof t&&(t=new p(t,0)),this._segment=t,this._parent=n,this._init_url_data();var r="string"==typeof(e=e||document.body)?this.webix.toNode(e):e;return this._container!==r?(this._container=r,this._render(t)):this._urlChange().then((function(){return i.getRoot()}))},t.prototype._render=function(e){var t=this,n=this.config();return n.then?n.then((function(n){return t._render_final(n,e)})):this._render_final(n,e)},t.prototype._render_final=function(e,t){var n=this,i=null,r=null,o=!1;if(this._container.tagName?r=this._container:(i=this._container).popup?(r=document.body,o=!0):r=this.webix.$$(i.id),!this.app||!r)return Promise.reject(null);var a=void 0,s=this._segment.current(),c={ui:{}};this.app.copyConfig(e,c.ui,this._subs),this.app.callEvent("app:render",[this,t,c]),c.ui.$scope=this,!i&&s.isNew&&s.view&&s.view.destructor();try{if(i&&!o){var u=r,l=u.getParentView();l&&"multiview"===l.name&&!c.ui.id&&(c.ui.id=u.config.id)}this._root=this.app.webix.ui(c.ui,r);var f=this._root;o&&f.setPosition&&!f.isVisible()&&f.show(),i&&(i.view&&i.view!==this&&i.view!==this.app&&i.view.destructor(),i.id=this._root.config.id,this.getParentView()||!this.app.app?i.view=this:i.view=this.app),s.isNew&&(s.view=this,s.isNew=!1),a=Promise.resolve(this._init(this._root,t)).then((function(){return n._urlChange().then((function(){return n._initUrl=null,n.ready(n._root,t.suburl())}))}))}catch(e){a=Promise.reject(e)}return a.catch((function(e){return n._initError(n,e)}))},t.prototype._init=function(e,t){return this.init(e,t.suburl())},t.prototype._urlChange=function(){var e=this;this.app.callEvent("app:urlchange",[this,this._segment]);var t=[];for(var n in this._subs){var i=this._subs[n],r=this._renderFrameLock(n,i,null);r&&t.push(r)}return Promise.all(t).then((function(){return e.urlChange(e._root,e._segment.suburl())}))},t.prototype._renderFrameLock=function(e,t,n){if(!t.lock){var i=this._renderFrame(e,t,n);i&&(t.lock=i.then((function(){return t.lock=null}),(function(){return t.lock=null})))}return t.lock},t.prototype._renderFrame=function(e,t,n){var i=this;if("default"===e){if(this._segment.next())return this._createSubView(t,this._segment.shift());t.view&&t.popup&&(t.view.destructor(),t.view=null)}if(null!==n&&(t.url=n),t.route){if(null!==n)return t.route.show(n,t.view).then((function(){return i._createSubView(t,t.route)}));if(t.branch)return}var r=t.view;if(!r&&t.url){if("string"==typeof t.url)return t.route=new p(t.url,0),this._createSubView(t,t.route);"function"!=typeof t.url||r instanceof t.url||(r=new t.url(this.app,"")),r||(r=t.url)}if(r)return r.render(t,t.route||this._segment,this)},t.prototype._initError=function(e,t){return this.app&&this.app.error("app:error:initview",[t,e]),!0},t.prototype._createSubView=function(e,t){var n=this;return this.app.createFromURL(t.current()).then((function(i){return i.render(e,t,n)}))},t.prototype._destroyKids=function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t]&&e[t].destructor&&e[t].destructor();this._children=[]},t}(c),d=function(e){function t(n,i){a(this,t);var o=r(this,e.call(this,n,i));return o._ui=i.ui,o}return o(t,e),t.prototype.config=function(){return this._ui},t}(h),g=function(){function e(t,n,i){a(this,e),this.path="",this.app=i}return e.prototype.set=function(e,t){this.path=e;var n=this.app;n.app.getRouter().set(n._segment.append(this.path),{silent:!0})},e.prototype.get=function(){return this.path},e}(),v=!0,m=function(e){function t(n){a(this,t);var i=(n||{}).webix||window.webix,o=r(this,e.call(this,i));return o.config=o.webix.extend({name:"App",version:"1.0",start:"/home"},n,!0),o.app=o.config.app,o.ready=Promise.resolve(),o._services={},o.webix.extend(o,o.webix.EventSystem),o}return o(t,e),t.prototype.getUrl=function(){return this._subSegment.suburl()},t.prototype.getUrlString=function(){return this._subSegment.toString()},t.prototype.getService=function(e){var t=this._services[e];return"function"==typeof t&&(t=this._services[e]=t(this)),t},t.prototype.setService=function(e,t){this._services[e]=t},t.prototype.destructor=function(){this.getSubView().destructor(),e.prototype.destructor.call(this)},t.prototype.copyConfig=function(e,t,n){if((e instanceof c||"function"==typeof e&&e.prototype instanceof c)&&(e={$subview:e}),void 0!==e.$subview)return this.addSubView(e,t,n);for(var r in t=t||(e instanceof Array?[]:{}),e){var o=e[r];if("function"==typeof o&&o.prototype instanceof c&&(o={$subview:o}),!o||"object"!==(void 0===o?"undefined":i(o))||o instanceof this.webix.DataCollection||o instanceof RegExp||o instanceof Map)t[r]=o;else if(o instanceof Date)t[r]=new Date(o);else{var a=this.copyConfig(o,o instanceof Array?[]:{},n);null!==a&&(t[r]=a)}}return t},t.prototype.getRouter=function(){return this.$router},t.prototype.clickHandler=function(e,t){if(e&&(t=t||e.target||e.srcElement)&&t.getAttribute){var n=t.getAttribute("trigger");if(n)return this._forView(t,(function(e){return e.app.trigger(n)})),e.cancelBubble=!0,e.preventDefault();var i=t.getAttribute("route");if(i)return this._forView(t,(function(e){return e.show(i)})),e.cancelBubble=!0,e.preventDefault()}var r=t.parentNode;r&&this.clickHandler(e,r)},t.prototype.getRoot=function(){return this.getSubView().getRoot()},t.prototype.refresh=function(){var e=this;return this._subSegment?this.getSubView().refresh().then((function(t){return e.callEvent("app:route",[e.getUrl()]),t})):Promise.resolve(null)},t.prototype.loadView=function(e){var t=this,n=this.config.views,i=null;if(""===e)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{n&&"string"==typeof(i="function"==typeof n?n(e):n[e])&&(e=i,i=null),i||(i="_blank"===e?{}:this._loadViewDynamic(e))}catch(t){i=this._loadError(e,t)}return i.then||(i=Promise.resolve(i)),i=i.then((function(e){return e.__esModule?e.default:e})).catch((function(n){return t._loadError(e,n)}))},t.prototype._forView=function(e,t){var n=this.webix.$$(e);n&&t(n.$scope)},t.prototype._loadViewDynamic=function(e){return null},t.prototype.createFromURL=function(e){var t=this;return e.isNew||!e.view?this.loadView(e.page).then((function(e){return t.createView(e,name)})):Promise.resolve(e.view)},t.prototype.createView=function(e,n){if("function"==typeof e){if(e.prototype instanceof t)return new e({app:this,name:n,router:g});if(e.prototype instanceof c)return new e(this,{name:n});e=e(this)}return e instanceof c?e:new d(this,{name:n,ui:e})},t.prototype.show=function(e){return this.render(this._container,e||this.config.start)},t.prototype.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.apply(e,n)},t.prototype.apply=function(e,t){this.callEvent(e,t)},t.prototype.action=function(e){return this.webix.bind((function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];this.apply(e,n)}),this)},t.prototype.on=function(e,t){this.attachEvent(e,t)},t.prototype.use=function(e,t){e(this,null,t)},t.prototype.error=function(e,t){if(this.callEvent(e,t),this.callEvent("app:error",t),this.config.debug)for(var n=0;n<t.length;n++)if(console.error(t[n]),t[n]instanceof Error){var i=t[n].message;0===i.indexOf("Module build failed")?(i=i.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+i+"</pre>"):(i+="<br><br>Check console for more details",this.webix.message({type:"error",text:i,expire:-1}))}},t.prototype.render=function(e,t,n){var i=this;this._container="string"==typeof e?this.webix.toNode(e):e||document.body;var r=null;!this.$router?(v&&"tagName"in this._container&&(this.webix.event(document.body,"click",(function(e){return i.clickHandler(e)})),v=!1),"string"==typeof t&&(t=new p(t,0)),this._subSegment=this._first_start(t),this._subSegment.route.linkRouter=!0):r="string"==typeof t?t:this.app?t.split().route.path||this.config.start:t.toString();var o=this.getSubView(),a=this._subSegment,s=a.show(r,o).then((function(){return i.createFromURL(a.current())})).then((function(t){return t.render(e,a)})).then((function(e){return i.$router.set(a.route.path,{silent:!0}),i.callEvent("app:route",[i.getUrl()]),e}));return this.ready=this.ready.then((function(){return s})),s},t.prototype.getSubView=function(){if(this._subSegment){var e=this._subSegment.current().view;if(e)return e}return new h(this,{})},t.prototype._first_start=function(e){var t=this;this._segment=e;if(this.$router=new this.config.router((function(e){return setTimeout((function(){t.show(e).catch((function(e){if(!(e instanceof s))throw e}))}),1)}),this.config,this),this._container===document.body&&!1!==this.config.animation){var n=this._container;this.webix.html.addCss(n,"webixappstart"),setTimeout((function(){t.webix.html.removeCss(n,"webixappstart"),t.webix.html.addCss(n,"webixapp")}),10)}if(e)this.app&&(e.current().view=this,e.next()?(e.refresh(),e=e.split()):e=new p(this.config.start,0));else{var i=this.$router.get();i||(i=this.config.start,this.$router.set(i,{silent:!0})),e=new p(i,0)}return e},t.prototype._loadError=function(e,t){return this.error("app:error:resolve",[t,e]),{template:" "}},t.prototype.addSubView=function(e,t,n){var i=!0!==e.$subview?e.$subview:null,r=e.name||(i?this.webix.uid():"default");return t.id=e.id||"s"+this.webix.uid(),(n[r]={id:t.id,url:i,branch:e.branch,popup:e.popup}).popup?null:t},t}(c),b=function(){function e(t,n){var i=this;a(this,e),this.config=n||{},this._detectPrefix(),this.cb=t,window.onpopstate=function(){return i.cb(i.get())}}return e.prototype.set=function(e,t){var n=this;if(this.config.routes){var i=e.split("?",2);for(var r in this.config.routes)if(this.config.routes[r]===i[0]){e=r+(i.length>1?"?"+i[1]:"");break}}this.get()!==e&&window.history.pushState(null,null,this.prefix+this.sufix+e),t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){var e=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(e="/"!==e&&"#"!==e?e:"",this.config.routes){var t=e.split("?",2),n=this.config.routes[t[0]];n&&(e=n+(t.length>1?"?"+t[1]:""))}return e},e.prototype._detectPrefix=function(){var e=this.config.routerPrefix;this.sufix="#"+(void 0===e?"!":e),this.prefix=document.location.href.split("#",2)[0]},e.prototype._getRaw=function(){return document.location.href},e}(),w=!1;function y(e){if(!w&&e){w=!0;var t=window;t.Promise||(t.Promise=e.promise);var n=e.version.split(".");10*n[0]+1*n[1]<53&&(e.ui.freeze=function(t){var n=t();return n&&n.then?n.then((function(t){return e.ui.$freeze=!1,e.ui.resize(),t})):(e.ui.$freeze=!1,e.ui.resize()),n});var r=e.ui.baselayout.prototype.addView,o=e.ui.baselayout.prototype.removeView,a={addView:function(e,t){var n=this;if(!this.$scope||!this.$scope.webixJet||e.queryView)return r.apply(this,arguments);var o=function(){var i=n.$scope,o={};e=i.app.copyConfig(e,{},o),r.apply(n,[e,t]);var a=function(e){i._renderFrame(e,o[e],null).then((function(){i._subs[e]=o[e]}))};for(var s in o)a(s);return{v:e.id}}();return"object"===(void 0===o?"undefined":i(o))?o.v:void 0},removeView:function(){if(o.apply(this,arguments),this.$scope&&this.$scope.webixJet){var t=this.$scope._subs;for(var n in t){var i=t[n];e.$$(i.id)||(i.view.destructor(),delete t[n])}}}};e.extend(e.ui.layout.prototype,a,!0),e.extend(e.ui.baselayout.prototype,a,!0),e.protoUI({name:"jetapp",$init:function(t){this.$app=new this.app(t);var n=e.uid().toString();for(var i in t.body={id:n},this.$ready.push((function(){this.$app.render({id:n})})),this.$app){var r=this.$app[i];"function"!=typeof r||this[i]||(this[i]=r.bind(this.$app))}}},e.ui.proxy)}}var x=function(e){function t(n){a(this,t),n.router=n.router||b;var i=r(this,e.call(this,n));return y(i.webix),i}return o(t,e),t.prototype._loadViewDynamic=function(e){return e=e.replace(/\./g,"/"),n(29)("./"+e)},t}(m);(function(){function e(t,n,i){a(this,e),this.storage=n.storage||i.webix.storage.session,this.name=n.storeName||n.id+":route",this.cb=t}e.prototype.set=function(e,t){var n=this;this.storage.put(this.name,e),t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){return this.storage.get(this.name)}})(),function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}o(t,e),t.prototype._detectPrefix=function(){this.prefix="",this.sufix=this.config.routerPrefix||""},t.prototype._getRaw=function(){return document.location.pathname+(document.location.search||"")}}(b),function(){function e(t,n){a(this,e),this.path="",this.cb=t}e.prototype.set=function(e,t){var n=this;this.path=e,t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){return this.path}}();function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function j(e,t,n){for(var i in e)_(e,i)&&t.call(n||e,e[i],i,e)}function S(e){e="Warning: "+e,"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}}var C=String.prototype.replace,E=String.prototype.split,$=function(e){var t=e%10;return 11!==e&&1===t?0:2<=t&&t<=4&&!(e>=12&&e<=14)?1:2},O={arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:$,chinese:function(){return 0},croatian:$,french:function(e){return e>1?1:0},german:function(e){return 1!==e?1:0},russian:$,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3}},R={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function k(e){var t,n=(t={},j(R,(function(e,n){j(e,(function(e){t[e]=n}))})),t);return n[e]||n[E.call(e,/-/,1)[0]]||n.en}function P(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var T=/\$/g,A=/%\{(.*?)\}/g;function I(e,t,n,i){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var r=e,o=i||A,a="number"==typeof t?{smart_count:t}:t;if(null!=a.smart_count&&r){var s=E.call(r,"||||");r=(s[function(e,t){return O[k(e)](t)}(n||"en",a.smart_count)]||s[0]).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return r=C.call(r,o,(function(e,t){return _(a,t)&&null!=a[t]?C.call(a[t],T,"$$"):e}))}function F(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var n=t.allowMissing?I:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:n,this.warn=t.warn||S,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",n=e&&e.suffix||"}";if("||||"===t||"||||"===n)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(P(t)+"(.*?)"+P(n),"g")}(t.interpolation)}F.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},F.prototype.extend=function(e,t){j(e,(function(e,n){var r=t?t+"."+n:n;"object"===(void 0===e?"undefined":i(e))?this.extend(e,r):this.phrases[r]=e}),this)},F.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:j(e,(function(e,n){var r=t?t+"."+n:n;"object"===(void 0===e?"undefined":i(e))?this.unset(e,r):delete this.phrases[r]}),this)},F.prototype.clear=function(){this.phrases={}},F.prototype.replace=function(e){this.clear(),this.extend(e)},F.prototype.t=function(e,t){var n,i,r=null==t?{}:t;if("string"==typeof this.phrases[e])n=this.phrases[e];else if("string"==typeof r._)n=r._;else if(this.onMissingKey){i=(0,this.onMissingKey)(e,r,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+e+'"'),i=e;return"string"==typeof n&&(i=I(n,r,this.currentLocale,this.tokenRegex)),i},F.prototype.has=function(e){return _(this.phrases,e)},F.transformPhrase=function(e,t,n){return I(e,t,n)};var D=F;function M(e,t,n){if(t.urls)n=t.urls[n]||n;else if(t.param){var i;(i={})[t.param]=n,n=i}e.show(n)}var N={good:"check",error:"warning",saving:"refresh fa-spin"},V={good:"Ok",error:"Error",saving:"Connecting..."};function L(e,t,n){for(var i=0;i<n.length;i++)e[n[i]]=t[i+1]?t[i+1].page:""}var G=window.webix;G&&y(G);var U={UnloadGuard:function(e,t,n){t.on(e,"app:guard",(function(e,i,r){if(i===t||i.contains(t)){var o=n();r.confirm=!1===o?Promise.reject(new s):r.confirm.then((function(){return o}))}}))},Locale:function(e,t,i){var r=(i=i||{}).storage,o=r?r.get("lang")||"en":i.lang||"en";function a(t,n,a){n.__esModule&&(n=n.default);var s={phrases:n};i.polyglot&&e.webix.extend(s,i.polyglot);var u=c.polyglot=new D(s);if(u.locale(t),c._=e.webix.bind(u.t,u),o=t,r&&r.put("lang",o),i.webix){var l=i.webix[t];l&&e.webix.i18n.setLocale(l)}return a?Promise.resolve():e.refresh()}function s(e,t){if(!1!==i.path){var r=(i.path?i.path+"/":"")+e;a(e,n(30)("./"+r),t)}}var c={getLang:function(){return o},setLang:s,setLangData:a,_:null,polyglot:null};e.setService("locale",c),s(o,!0)},Menu:function(e,t,n){var i=t.getSubViewInfo().parent,r=t.$$(n.id||n),o=!1;r.attachEvent("onchange",(function(){o||M(i,n,this.getValue())})),r.attachEvent("onafterselect",(function(){if(!o){var e=null;r.setValue?e=this.getValue():r.getSelectedId&&(e=r.getSelectedId()),M(i,n,e)}})),t.on(e,"app:route",(function(){var e="";if(n.param)e=t.getParam(n.param,!0);else{var a=i.getUrl()[1];a&&(e=a.page)}e&&(o=!0,r.setValue&&r.getValue()!==e?r.setValue(e):r.select&&r.exists(e)&&r.getSelectedId()!==e&&r.select(e),o=!1)}))},Theme:function(e,t,n){var i=(n=n||{}).storage,r=i?i.get("theme")||"flat-default":n.theme||"flat-default",o={getTheme:function(){return r},setTheme:function(t,n){for(var o=t.split("-"),a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s].getAttribute("title");c&&(c===t||c===o[0]?a[s].disabled=!1:a[s].disabled=!0)}e.webix.skin.set(o[0]),e.webix.html.removeCss(document.body,"theme-"+r),e.webix.html.addCss(document.body,"theme-"+t),r=t,i&&i.put("theme",t),n||e.refresh()}};e.setService("theme",o),o.setTheme(r,!0)},User:function(e,t,n){var i=(n=n||{}).login||"/login",r=n.logout||"/logout",o=n.afterLogin||e.config.start,a=n.afterLogout||"/login",s=n.ping||3e5,c=n.model,u=n.user,l={getUser:function(){return u},getStatus:function(e){return e?c.status().catch((function(){return null})).then((function(e){u=e})):null!==u},login:function(t,n){return c.login(t,n).then((function(t){if(u=t,!t)throw new Error("Access denied");e.callEvent("app:user:login",[u]),e.show(o)}))},logout:function(){return u=null,c.logout().then((function(t){return e.callEvent("app:user:logout",[]),t}))}};function f(e,t){e===r?(l.logout(),t.redirect=a):e===i||l.getStatus()||(t.redirect=i)}e.setService("user",l),e.attachEvent("app:guard",(function(e,t,i){return!(!n.public||!n.public(e))||(void 0===u&&(i.confirm=l.getStatus(!0).then((function(){return f(e,i)}))),f(e,i))})),s&&setInterval((function(){return l.getStatus(!0)}),s)},Status:function(e,t,n){var i="good",r=0,o=!1,a=n.expire;a||!1===a||(a=2e3);var s=n.texts||V,c=n.icons||N;function u(e){var r=t.$$(n.target);r&&(e||(e="<div class='status_"+i+"'><span class='webix_icon fa-"+c[i]+"'></span> "+s[i]+"</div>"),r.setHTML(e))}function l(){r--,d("good")}function f(e){r--,d("error",e)}function p(e){r++,d("saving"),e&&e.then&&e.then(l,f)}function h(){0===r&&u(" ")}function d(t,n){r<0&&(r=0),"saving"===t?(i="saving",u()):(o="error"===t,0===r&&(i=o?"error":"good",o?e.error("app:error:server",[n.responseText||n]):a&&setTimeout(h,a),u()))}function g(n){var i=e.webix.dp(n);i&&(t.on(i,"onAfterDataSend",p),t.on(i,"onAfterSaveError",(function(e,t,n){return f(n)})),t.on(i,"onAfterSave",l))}"string"==typeof n&&(n={target:n}),e.setService("status",{getStatus:function(){return i},setStatus:d,track:g}),n.remote&&t.on(e.webix,"onRemoteCall",p),n.ajax&&t.on(e.webix,"onBeforeAjax",(function(e,t,n,i,r,o,a){p(a)})),n.data&&g(n.data)},UrlParam:function(e,t,n){var i=n.route||n,r={};t.on(e,"app:urlchange",(function(e,n){t===e&&(L(r,n.suburl(),i),n.size(i.length+1))}));var o=t.setParam,a=t.getParam;t.setParam=function(e,n,a){var s=i.indexOf(e);return s>=0?(r[e]=n,this._segment.update("",n,s+1),a?t.show(null):void 0):o.call(this,e,n,a)},t.getParam=function(e,t){var n=r[e];return void 0!==n?n:a.call(this,e,t)},L(r,t.getUrl(),i)}},J=window;J.Promise||(J.Promise=J.webix.promise)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var i={errorMessageAjax:function(e){var t=e.response;webix.alert({type:"alert-error",title:"ERROR",text:t})},errorMessage:function(e){webix.alert({type:"alert-error",title:"ERROR",text:e})},normalMessage:function(e){webix.alert({title:"INFORMATION",text:e})},errorRestriccion:function(){webix.alert({title:"INFORMATION",text:"Hay registros dependientes de esta entrada. No se puede eliminar."})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(7),r=n(0),o={getUsuarioCookie:function(){var e=i.a.getCookie("usuarioComercializa");return e?JSON.parse(e):null},setUsuarioCookie:function(e){i.a.setCookie("usuarioComercializa",JSON.stringify(e),1)},deleteUsuarioCookie:function(e){i.a.deleteCookie("usuarioComercializa")},checkLoggedUser:function(){var e=o.getUsuarioCookie();return e||(window.open("/#!/login","_blank"),window.close(),!1)},getLogin:function(e,t){return new webix.promise((function(n,i){r.a.getConfig().then((function(n){var i=n.urlApi+"/api/usuarios/login",r={usuario:{login:e,password:t}};return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(i,r)})).then((function(e){n(e.json())})).catch((function(e){i(e)}))}))},getUsuarios:function(){return new webix.promise((function(e,t){r.a.getConfig().then((function(e){var t=e.urlApi+"/api/usuarios/";return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(t)})).then((function(t){e(t.json())})).catch((function(e){t(e)}))}))},getUsuario:function(e){return new webix.promise((function(t,n){r.a.getConfig().then((function(t){var n=t.urlApi+"/api/usuarios/"+e;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(n)})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},getDepartamentosAsociados:function(e){return new webix.promise((function(t,n){r.a.getConfig().then((function(t){var n=t.urlApi+"/api/usuarios/departamentos/"+e;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(n)})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},postUsuario:function(e){return new webix.promise((function(t,n){r.a.getConfig().then((function(t){var n=t.urlApi+"/api/usuarios/";return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(n,{usuario:e})})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},postUsuarioDepartamento:function(e){return new webix.promise((function(t,n){r.a.getConfig().then((function(t){var n=t.urlApi+"/api/usuarios/departamento";return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(n,{departamento:e})})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},putUsuario:function(e){return new webix.promise((function(t,n){r.a.getConfig().then((function(t){var n=t.urlApi+"/api/usuarios/"+e.usuarioId;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).put(n,{usuario:e})})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},putUsuarioDepartamento:function(e,t){return new webix.promise((function(n,i){r.a.getConfig().then((function(n){var i=n.urlApi+"/api/usuarios/departamento/"+e;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).put(i,{departamento:t})})).then((function(e){n(e.json())})).catch((function(e){i(e)}))}))},deleteUsuario:function(e){return new webix.promise((function(t,n){r.a.getConfig().then((function(t){var n=t.urlApi+"/api/usuarios/"+e;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).del(n)})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},deleteUsuarioDepartamento:function(e){return new webix.promise((function(t,n){r.a.getConfig().then((function(t){var n=t.urlApi+"/api/usuarios/departamento/"+e;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).del(n)})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},prepareDataForCombo:function(){return[{id:1,value:"Usuario"},{id:2,value:"Jefe de Equipo"},{id:3,value:"Vigilante"}]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"languageService",(function(){return o}));var i=n(1),r={es:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",am:null,pm:null,price:"{obj} €",calendar:{monthFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthShort:["En","Feb","Mar","Abr","Mayo","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayFull:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],dayShort:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"]},hours:"Horas ",minutes:"Minutos",done:"Listo",controls:{select:"Seleccione"}},en:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",am:null,pm:null,price:"{obj} €",calendar:{monthFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthShort:["En","Feb","Mar","Abr","Mayo","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayFull:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],dayShort:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"]},hours:"Horas ",minutes:"Minutos",done:"Listo",controls:{select:"Seleccione"}},fr:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",am:null,pm:null,price:"{obj} €",calendar:{monthFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthShort:["En","Feb","Mar","Abr","Mayo","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayFull:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],dayShort:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"]},hours:"Horas ",minutes:"Minutos",done:"Listo",controls:{select:"Seleccione"}}},o={setLanguage:function(e,t){e.use(i.d.Locale,{lang:t}),webix.i18n.locales[t]=r[t],webix.i18n.setLocale(t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={prepareDataForDataTable:function(e,t){var n=[];return t.forEach((function(t){t.id=t[e],n.push(t)})),n},prepareDataForCombo:function(e,t,n){var i=[];return n.forEach((function(n){i.push({id:n[e],value:n[t]})})),i}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(0),r={getServiciosPartes:function(e,t){return new webix.promise((function(n,r){i.a.getConfig().then((function(n){var i=n.urlApi+"/api/servicios/partes/"+e+"/"+t;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(i)})).then((function(e){n(e.json())})).catch((function(e){r(e)}))}))},getServicioParte:function(e,t){return new webix.promise((function(n,r){i.a.getConfig().then((function(n){var i=n.urlApi+"/api/servicios/parte/uno/"+e+"/"+t;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(i)})).then((function(e){n(e.json())})).catch((function(e){r(e)}))}))},getServiciosComercial:function(e){return new webix.promise((function(t,n){i.a.getConfig().then((function(t){var n=t.urlApi+"/api/servicios/agente/"+e.comercialId;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(n)})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},getServicio:function(e){return new webix.promise((function(t,n){i.a.getConfig().then((function(t){var n=t.urlApi+"/api/servicios/"+e;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(n)})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},getNumServicio:function(){return new webix.promise((function(e,t){i.a.getConfig().then((function(e){var t=e.urlApi+"/api/servicios/nuevo/numero/servicio";return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(t)})).then((function(t){e(t.json())})).catch((function(e){t(e)}))}))},postServicio:function(e){return new webix.promise((function(t,n){i.a.getConfig().then((function(t){var n=t.urlApi+"/api/servicios";return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(n,{servicio:e})})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},putServicio:function(e){return new webix.promise((function(t,n){i.a.getConfig().then((function(t){var n=t.urlApi+"/api/servicios/"+e.servicioId;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).put(n,{servicio:e})})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},deleteServicio:function(e){return new webix.promise((function(t,n){i.a.getConfig().then((function(t){var n=t.urlApi+"/api/servicios/"+e;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).del(n)})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},prepareData:function(e){return e.forEach((function(e){e.fechaEntrada&&(e.fechaEntrada=new Date(e.fechaEntrada))})),e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={areCookiesEnabled:function(){var e=!!navigator.cookieEnabled;return void 0!==navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")),e},setCookie:function(e,t,n){i.areCookiesEnabled()||alert("NO COOKIES");var r=new Date;r.setDate(r.getDate()+n);var o=encodeURI(t)+(null==n?"":"; expires="+r.toUTCString());document.cookie=e+"="+o},deleteCookie:function(e){i.areCookiesEnabled()||alert("NO COOKIES"),document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},getCookie:function(e){var t,n,i,r=document.cookie.split(";");for(t=0;t<r.length;t++)if(n=r[t].substr(0,r[t].indexOf("=")),i=r[t].substr(r[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==e)return decodeURI(i)}}},function(e,t,n){"use strict";n.r(t);var i,r=n(1),o=(n(3),n(0));function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"window",id:"facturasEpisReport",position:"top",move:!0,resize:!0,scroll:"x,y",width:1129,height:775,fullscreen:!1,head:{view:"toolbar",cols:[{view:"label",label:(0,this.app.getService("locale")._)("IMPRESIÓN DE FACTURAS")},{view:"icon",icon:"mdi mdi-close",click:function(){$$("facturasEpisReport").hide()}}]},modal:!0,body:{template:"<div id='report_viewer'></div>"}}},t.prototype.init=function(e,t){o.a.getConfigMysql().then((function(e){i=e})).catch((function(e){fail(e)}))},t.prototype.showWindow=function(e,t){$$("facturasEpisReport").show();var n=new Stimulsoft.Viewer.StiViewerOptions;Stimulsoft.Base.Localization.StiLocalization.setLocalizationFile("../stireport/localization/es.xml",!0),Stimulsoft.Base.StiLicense.key="6vJhGtLLLz2GNviWmUTrhSqnOItdDwjBylQzQcAOiHltN9ZO4D78QwpEoh6+UpBm5mrGyhSAIsuWoljPQdUv6R6vgviStsx8W3jirJvfPH27oRYrC2WIPEmaoAZTNtqb+nDxUpJlSmG62eA46oRJDV8kJ2cJSEx19GMJXYgZvv7yQT9aJHYaSrTVD7wdhpNVS1nQC3OtisVd7MQNQeM40GJxcZpyZDPfvld8mK6VX0RTPJsQZ7UcCEH4Y3LaKzA5DmUS+mwSnjXz/JFv1uO2JNkfcioieXfYfTaBIgZlKecarCS5vBgMrXly3m5kw+YwpJ2v+cMXuDk3UrZgrdxNnOhg8ZHPg9ijHxqUomZZBzKpVQU0d06ne60j/liMH5KirAI2JCVfBcBvIcyliJos8LAWr9q/1sPR9y7LmA1eyS1/dXaxmEaqi5ubhLqlf+OS0xFX6tlBBgegqHlIj6Fytwvq5YlGAZ0Cra05JhnKh/ohYlADQz6Jbg5sOKyn5EbejvPS3tWr0LRBH2FO6+mJaSEAwzGmoWT057ScSvGgQmfx8wCqSF+PgK/zTzjy75Oh",StiOptions.WebServer.url=i.report.stiUrl,n.appearance.scrollbarsMode=!0,n.appearance.fullScreenMode=!1,n.toolbar.showSendEmailButton=!1,n.toolbar.viewMode=Stimulsoft.Viewer.StiWebViewMode.Continuous;var r=new Stimulsoft.Viewer.StiViewer(n,"StiViewer",!1),o=new Stimulsoft.Report.StiReport;o.loadFile(t);i.report.host;i.report.database,i.report.user,i.report.password;for(var a=0;a<o.dataSources.items.length;a++)o.dataSources.items[a].sqlCommand;var s=o.dataSources.items[0].sqlCommand;s=s+" WHERE pf.facturaId = "+e,o.dataSources.items[0].sqlCommand=s,r.report=o,r.renderHtml("report_viewer")},t.prototype.cancel=function(){$$("facturasEpisReport").hide()},t}(r.c);t.default=c},function(e,t,n){"use strict";n.r(t);var i=n(1);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"sidebar",width:280,id:"main:menu",activeTitle:!0,select:!0,data:[{id:"inicio",icon:"mdi mdi-home",value:"Inicio"},{id:"Reparaciones",icon:"mdi mdi-book",value:e("Reparaciones"),open:!0,data:[{id:"facturas",icon:"mdi mdi-currency-eur",value:e("Facturas")},{id:"servicios",icon:"mdi mdi-transcribe",value:e("Servicios")},{id:"tarifas",icon:"mdi mdi-format-list-numbers",value:e("Tarifas")}]}]}},t.prototype.init=function(){this.use(i.d.Menu,"main:menu")},t}(i.c);t.default=a},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3),o=n(4);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app,n=(t.getService("locale"),t.getService("theme"),r.a.getUsuarioCookie());this.app.getService("locale")._;return{view:"toolbar",height:60,elements:[{view:"button",type:"icon",icon:"mdi mdi-menu",width:37,align:"left",click:function(){$$("main:menu").toggle()}},{view:"label",label:"<a href='#!/top/inicio'><img src='assets/img/logo.png' height='50' /></a>",width:150},{view:"button",width:60,label:'<span class="mdi mdi-account-key mdi-36px mystyle"></span>'},{height:46,id:"person_template",css:"header_person",borderless:!0,data:n,template:function(e){var t="<div style='height:100%;width:100%;'>";return t+="<span class='name'>"+e.nombre+"</span> </div>"}},{view:"label",label:"\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t<img style=\"vertical-align:middle\" src='assets/img/handshake.png' height='35' />\n\t\t\t\t\t\t<span>"+this.app.config.name+"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t",width:200},{view:"button",type:"icon",icon:"mdi mdi-exit-run mdi-36px",width:50,align:"right",tooltip:"Salir",click:function(){r.a.deleteUsuarioCookie(),e.show("/login")}}]}},t.prototype.init=function(){r.a.checkLoggedUser(),o.languageService.setLanguage(this.app,"es")},t}(i.c);t.default=c},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3),o=(n(7),n(0)),a=function(){return new webix.promise((function(e,t){o.a.getConfig().then((function(e){var t=e.urlApi+"/api/version";return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(t,null)})).then((function(t){e(t.json())})).catch((function(e){t(e)}))}))};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app;e.getService("locale"),e.getService("theme"),r.a.getUsuarioCookie(),this.app.getService("locale")._;return{view:"label",id:"vers",align:"center",label:"NREG: ",height:60,minWidth:100}},t.prototype.init=function(){a().then((function(e){$$("vers").config.label="Proasistencia "+e.version+" - Aplicación general © Ariadna Software S.L. 2019-2020",$$("vers").refresh()})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?messageApi.errorRestriccion():messageApi.errorMessageAjax(e)}))},t}(i.c);t.default=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(0),r={getTarifaProfesiones:function(e,t){return new webix.promise((function(n,r){i.a.getConfig().then((function(n){var i=n.urlApi+"/api/tarifas_cliente/cliente-agente/recupera/tarifa-profesiones/"+e+"/"+t;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(i)})).then((function(e){n(e.json())})).catch((function(e){r(e)}))}))},getLineasTarifaProfesion:function(e,t){var n=[];return n.push(t),new webix.promise((function(t,r){i.a.getConfig().then((function(t){var i=t.urlApi+"/api/tarifas_cliente/lineas/"+e;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(i,{tiposProfesionales:n})})).then((function(e){t(e.json())})).catch((function(e){r(e)}))}))}}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(0);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"window",id:"imprimirWindow",position:"center",move:!0,resize:!0,fullscreen:!0,head:{view:"toolbar",cols:[{view:"label",label:(0,this.app.getService("locale")._)("IMPRESIÓN DE FACTURAS")},{view:"icon",icon:"mdi mdi-close",click:function(){$$("imprimirWindow").hide()}}]},modal:!0,body:{template:"<div id='report_viewer'></div>"}}},t.prototype.init=function(e,t){r.a.getConfigMysql().then((function(e){myconfig=e})).catch((function(e){fail(e)}))},t.prototype.showWindow=function(e,t){},t.prototype.cancel=function(){$$("imprimirWindow").hide()},t}(i.c);t.default=s},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3),o=n(4);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){this.app.getService("locale")._;return{view:"iframe",id:"frame-body",src:"/ComerWeb/index.html"}},t.prototype.init=function(){r.a.checkLoggedUser(),o.languageService.setLanguage(this.app,"es")},t}(i.c);t.default=c},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3),o=n(2),a=n(5),s=n(12),c=n(4);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){return u(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-format-list-numbers",width:37,align:"left"},{view:"label",label:"Lineas de tarifa"}]},{cols:[{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+R",tooltip:t("Refrescar la lista (Ctrl+R)"),click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",tooltip:t("Descargar como Excel"),click:function(){webix.toExcel($$("tarifaLineasGrid"),{filename:"avisos",name:"Tarifas",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"TarifasNReg",label:"NREG: "}]},{view:"datatable",id:"tarifaLineasGrid",autoWidth:!0,heigth:800,select:"row",scheme:{$change:function(e){$$("tarifaLineasGrid").getIndexById(e.id)%2||(e.$css={background:"#E6E7E7"})}},columns:[{id:"tarifaClienteLineaId",header:["Id",{content:"textFilter"}],sort:"string",adjust:"data",hidden:!0},{id:"codigoReparacion",header:["Codigo",{content:"textFilter"}],sort:"string",adjust:"data"},{id:"unidadConstructiva",header:["Descripcion",{content:"textFilter"}],sort:"string",fillspace:!0},{id:"precioUnitario",header:["Importe",{content:"textFilter"}],sort:"int",format:webix.i18n.numberFormat,adjust:!0}],onClick:{},editable:!0,editaction:"dblclick",rules:{},on:{}},{view:"form",id:"frmBotones",elements:[{cols:[{minwidth:600},{rows:[{padding:20,cols:[{view:"button",label:"Volver",click:this.accept,type:"form"}]}]}]}]}]}},t.prototype.init=function(e,t){},t.prototype.urlChange=function(e,t){r.a.checkLoggedUser(),c.languageService.setLanguage(this.app,"es");var n=null,i=null;t[0].params.tarifaClienteId&&(n=t[0].params.tarifaClienteId),t[0].params.tipoProfesionalId&&(i=t[0].params.tipoProfesionalId),i&&n&&this.load(n,i)},t.prototype.load=function(e,t){var n=this;s.a.getLineasTarifaProfesion(e,t).then((function(e){$$("tarifaLineasGrid").clearAll(),$$("tarifaLineasGrid").parse(a.a.prepareDataForDataTable("tarifaClienteLineaId",e));var t=$$("tarifaLineasGrid").count();$$("TarifasNReg").config.label="NREG: "+t,$$("TarifasNReg").refresh();var i=webix.storage.local.get("stateGridTarifas");i&&n.$$("tarifaLineasGrid").setState(i)})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?o.a.errorRestriccion():o.a.errorMessageAjax(e)}))},t.prototype.accept=function(){this.$scope.show("/top/tarifas")},t.prototype.cleanAndload=function(){$$("tarifaLineasGrid").eachColumn((function(e,t){if("actions"!=t.id){var n=this.getFilter(e);n&&(n.setValue?n.setValue(""):n.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3),o=n(2),a=n(5),s=n(6),c=n(4);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f,p,h=!1,d=function(e){function t(){return u(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-transcribe",width:37,align:"left"},{view:"label",label:"Avisos"}]},{cols:[{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+R",tooltip:t("Refrescar la lista (Ctrl+R)"),click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",tooltip:t("Descargar como Excel"),click:function(){webix.toExcel($$("serviciosGrid"),{filename:"avisos",name:"Servicios",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"ServiciosNReg",label:"NREG: "}]},{view:"datatable",id:"serviciosGrid",autoWidth:!0,select:"row",scheme:{$change:function(e){$$("serviciosGrid").getIndexById(e.id)%2||(e.$css={background:"#E6E7E7"})}},columns:[{id:"servicioId",header:["Id",{content:"textFilter"}],sort:"string",adjust:"data",hidden:!0},{id:"parteId",header:["Id",{content:"textFilter"}],sort:"string",adjust:"data",hidden:!0},{id:"fechaEntrada",header:[{text:"Fecha solicitud",css:{"text-align":"center"}},{content:"textFilter"}],sort:"date",adjust:"data",format:webix.Date.dateToStr("%d/%m/%Y"),css:{"text-align":"center"}},{id:"nombreCliente",header:["Nombre Cliente",{content:"textFilter"}],sort:"string",fillspace:!0},{id:"tipoProfesionNombre",header:["Profesion",{content:"textFilter"}],sort:"string",adjust:"data"},{id:"estadoParteNombre",header:["Estado",{content:"textFilter"}],sort:"string",adjust:"data"},{id:"actions",header:[{text:"Acciones",css:{"text-align":"center"}}],template:"<span class='onEdit mdi mdi-eye'></span>",css:{"text-align":"center"},width:100}],onClick:{onDelete:function(e,t,n){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,n){var i=$$("serviciosGrid").getItem(t.row);this.$scope.edit(t.row,i.parteId)}},editable:!0,editaction:"dblclick",rules:{direccionTrabajo:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){f=e.row,p=this.data.pull[f]},onAfterEditStop:function(e,t,n){var i=this,r=this.getColumnIndex(t.column),a=this.config.columns.length;if(h&&r!=a-2)return!1;if(e.value!=e.old)if(h=!1,this.validate(f)){delete(p=this.data.pull[f]).id;var c=p;delete c.fechaEntrada,0==c.servicioId?s.a.postServicio(c).then((function(e){i.$scope.load(e.servicioId),$$("serviciosGrid").editStop()})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?o.a.errorRestriccion():o.a.errorMessageAjax(e)})):s.a.putServicio(c).then((function(e){})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?o.a.errorRestriccion():o.a.errorMessageAjax(e)}))}else o.a.errorMessage("Valores incorrectos")},onAfterFilter:function(){webix.storage.local.put("stateGridServicios",this.getState())}}}]}},t.prototype.init=function(e,t){this.$$("serviciosGrid").attachEvent("onItemDblClick",(function(e,t,n){var i=$$("serviciosGrid").getItem(e.row);this.$scope.edit(e.row,i.parteId)}))},t.prototype.urlChange=function(e,t){var n=r.a.checkLoggedUser(),i=!1,o=n.comercialId;n.esCliente&&(i=!0,o=n.clienteId,ç),r.a.checkLoggedUser(),c.languageService.setLanguage(this.app,"es");var a=null;t[0].params.servicioId&&(a=t[0].params.servicioId),webix.UIManager.addHotKey("Esc",(function(){return $$("serviciosGrid").remove(-1),!1}),$$("serviciosGrid")),webix.extend($$("serviciosGrid"),webix.ProgressBar),this.load(a,o,i)},t.prototype.load=function(e,t,n){var i=this;s.a.getServiciosPartes(t,n).then((function(t){t=s.a.prepareData(t),$$("serviciosGrid").clearAll(),$$("serviciosGrid").parse(a.a.prepareDataForDataTable("servicioId",t)),e&&($$("serviciosGrid").select(e),$$("serviciosGrid").showItem(e));var n=$$("serviciosGrid").count();$$("ServiciosNReg").config.label="NREG: "+n,$$("ServiciosNReg").refresh();var r=webix.storage.local.get("stateGridServicios");r&&i.$$("serviciosGrid").setState(r)})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?o.a.errorRestriccion():o.a.errorMessageAjax(e)}))},t.prototype.edit=function(e,t){this.show("/top/serviciosForm?servicioId="+e+"&parteId="+t)},t.prototype.delete=function(e,t){var n=this.app.getService("locale")._,i=this;webix.confirm({title:n("AVISO"),text:n("¿Desea realmente borrar este registro?").replace("*",t),type:"confirm-warning",callback:function(t){!0===t&&s.a.deleteServicio(e).then((function(e){i.load()})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?o.a.errorRestriccion():o.a.errorMessageAjax(e)}))}})},t.prototype.cleanAndload=function(){$$("serviciosGrid").eachColumn((function(e,t){if("actions"!=t.id){var n=this.getFilter(e);n&&(n.setValue?n.setValue(""):n.value="")}})),this.load()},t}(i.c);t.default=d},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3),o=n(6),a=n(2),s=n(4);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l,f=0,p=0,h=function(e){function t(){return c(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){this.app.getService("locale")._;return{view:"layout",id:"serviciosForm",autoheight:!0,rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-transcribe",width:37,align:"left"},{view:"label",label:"Avisos"}]},{view:"form",scroll:"y",id:"frmServicios",elements:[{cols:[{cols:[{rows:[{view:"text",id:"nombreCliente",name:"nombreCliente",disabled:!0,label:"Cliente",labelPosition:"top",minWidth:50},{view:"datepicker",id:"fechaCierre",name:"fechaCierre",minWidth:50,disabled:!0,label:"Fecha de cierre",labelPosition:"top"},{view:"text",id:"tipoProfesionNombre",name:"tipoProfesionNombre",disabled:!0,label:"Profesión ",labelPosition:"top",minWidth:50},{view:"text",id:"estadoParteNombre",name:"estadoParteNombre",disabled:!0,label:"Estado",labelPosition:"top",minWidth:50},{view:"textarea",id:"descripcionAveria",name:"descripcionAveria",disabled:!0,label:"Descripción de la avería",labelPosition:"top",minHeight:100},{view:"textarea",id:"notasWeb",name:"notasWeb",disabled:!0,label:"Notas",labelPosition:"top",minHeight:100}]}]},{cols:[{id:"image",scroll:"y",data:{src:""},template:function(e){return"<img src="+e.src+' style="width:100%;" alt=" Enlace incorrecto, no se puede cargar" onerror="this.style.display="none">'}}]}]},{cols:[{minwidth:600},{rows:[{padding:20,cols:[{view:"button",label:"Aceptar",click:this.accept,type:"form"}]}]}]}]}]}},t.prototype.init=function(e,t){l=r.a.checkLoggedUser(),l.usuarioId,s.languageService.setLanguage(this.app,"es")},t.prototype.urlChange=function(e,t){l=r.a.checkLoggedUser(),l.usuarioId,s.languageService.setLanguage(this.app,"es"),t[0].params.servicioId&&(f=t[0].params.servicioId),t[0].params.parteId&&(p=t[0].params.parteId),f&&p&&this.load(f,p)},t.prototype.load=function(e,t){o.a.getServicioParte(e,t).then((function(e){e.fechaEntrada=new Date(e.fechaEntrada),e.fechaCierre=new Date(e.fechaCierre),$$("frmServicios").setValues(e),e.imagen&&""!=e.imagen?($$("image").show(),$$("image").setValues({src:e.imagen})):$$("image").hide()})).catch((function(e){a.a.errorMessageAjax(e.message)}))},t.prototype.accept=function(){this.$scope.show("/top/servicios?servicioId="+f)},t}(i.c);t.default=h},function(e,t,n){"use strict";n.r(t),t.default={template:"Start page",css:"webix_shadow_medium app_start"}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3),o=n(2),a=n(5),s=n(12),c=n(4);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){return u(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-format-list-numbers",width:37,align:"left"},{view:"label",label:"Tarifas"}]},{cols:[{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+R",tooltip:t("Refrescar la lista (Ctrl+R)"),click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",tooltip:t("Descargar como Excel"),click:function(){webix.toExcel($$("tarifasGrid"),{filename:"avisos",name:"Tarifas",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"TarifasNReg",label:"NREG: "}]},{view:"datatable",id:"tarifasGrid",autoWidth:!0,select:"row",scheme:{$change:function(e){$$("tarifasGrid").getIndexById(e.id)%2||(e.$css={background:"#E6E7E7"})}},columns:[{id:"tarifaClienteId",header:["Id",{content:"textFilter"}],sort:"string",adjust:"data",hidden:!0},{id:"tipoProfesionalId",header:["Id",{content:"textFilter"}],sort:"string",adjust:"data",hidden:!0},{id:"tipoProfesionalNombre",header:["Profesion",{content:"textFilter"}],sort:"string",fillspace:!0},{id:"nombre",header:["Nombre Tarifa",{content:"textFilter"}],sort:"string",adjust:"data"},{id:"actions",header:[{text:"Acciones",css:{"text-align":"center"}}],template:"<span class='onEdit mdi mdi-eye'></span>",css:{"text-align":"center"},width:100}],onClick:{onEdit:function(e,t,n){var i=$$("tarifasGrid").getItem(t.row);this.$scope.edit(t.row,i.tarifaClienteId)}},editable:!0,editaction:"dblclick",rules:{},on:{onAfterFilter:function(){webix.storage.local.put("stateGridTarifas",this.getState())}}}]}},t.prototype.init=function(e,t){this.$$("tarifasGrid").attachEvent("onItemDblClick",(function(e,t,n){var i=$$("tarifasGrid").getItem(e.row);this.$scope.edit(e.row,i.tarifaClienteId)}))},t.prototype.urlChange=function(e,t){var n=r.a.checkLoggedUser(),i=!1,o=n.comercialId;n.esCliente&&(i=!0,o=n.clienteId),r.a.checkLoggedUser(),c.languageService.setLanguage(this.app,"es");var a=null;t[0].params.tarifaClienteId&&(a=t[0].params.tarifaClienteId),webix.UIManager.addHotKey("Esc",(function(){return $$("tarifasGrid").remove(-1),!1}),$$("tarifasGrid")),webix.extend($$("tarifasGrid"),webix.ProgressBar),this.load(a,o,i)},t.prototype.load=function(e,t,n){var i=this;s.a.getTarifaProfesiones(t,n).then((function(t){$$("tarifasGrid").clearAll(),$$("tarifasGrid").parse(a.a.prepareDataForDataTable("tipoProfesionalId",t)),e&&($$("tarifasGrid").select(e),$$("tarifasGrid").showItem(e));var n=$$("tarifasGrid").count();$$("TarifasNReg").config.label="NREG: "+n,$$("TarifasNReg").refresh();var r=webix.storage.local.get("stateGridTarifas");r&&i.$$("tarifasGrid").setState(r)})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?o.a.errorRestriccion():o.a.errorMessageAjax(e)}))},t.prototype.edit=function(e,t){this.show("/top/lineasTarifaProfesion?tarifaClienteId="+t+"&tipoProfesionalId="+e)},t.prototype.cleanAndload=function(){$$("tarifasGrid").eachColumn((function(e,t){if("actions"!=t.id){var n=this.getFilter(e);n&&(n.setValue?n.setValue(""):n.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(9),o=n(10),a=n(11);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"view",rows:[o.default,{cols:[r.default,{view:"resizer",id:"resizer"},{$subview:!0}]},a.default]}},t.prototype.init=function(){},t}(i.c);t.default=u},function(e,t){},function(e,t,n){"use strict";n.r(t),t.default={Inicio:"Inicio","Nombre usuario":"Nombre usuario","Administración":"Administración",Salir:"Salir","Facturación":"Facturación",Facturas:"Facturas","Refrescar la lista (Ctrl+R)":"Refrescar la lista (Ctrl+R)","Descargar como Excel":"Descargar como Excel",Fecha:"Fecha","IMPRESIÓN DE ENTREGAS":"IMPRESIÓN DE ENTREGAS","IMPRESIÓN DE FACTURAS":"IMPRESIÓN DE FACTURAS",Servicios:"Servicios",Reparaciones:"Reparaciones",Tarifas:"Tarifas"}},function(e,t,n){"use strict";n.r(t),t.default={"Ancient Dashboard":"Ancient Dashboard"}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3),o=n(0),a=function(e,t,n){return new webix.promise((function(i,r){o.a.getConfig().then((function(i){var r=i.urlApi+"/api/facturas/cliente-agente/recupera/todas/"+t+"/"+n+"/"+e;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(r)})).then((function(e){i(e.json())})).catch((function(e){r(e)}))}))},s=n(2),c=n(5),u=n(4),l=function(e){return new webix.promise((function(t,n){o.a.getConfig().then((function(t){var n=t.urlApi+"/api/empresas/"+e;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(n)})).then((function(e){t(e.json())})).catch((function(e){n(e)}))}))},f=n(8);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){return p(this,t),h(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e,t=this,n=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-file",width:37,align:"left"},{view:"label",label:"Facturas"}]},{cols:[{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+R",tooltip:n("Refrescar la lista (Ctrl+R)"),click:function(){t.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",tooltip:n("Descargar como Excel"),click:function(){webix.toExcel($$("facturasGrid"),{filename:"facturas",name:"Partes",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"facturasNReg",label:"NREG: "},{view:"pager",id:"mypager1",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},((e={view:"datatable",css:{"font-size":"0.9em"},id:"facturasGrid",scroll:"x,y",pager:"mypager1",select:"row",scheme:{$change:function(e){$$("facturasGrid").getIndexById(e.id)%2||(e.$css={background:"#E6E7E7"})}},columns:[{id:"facturaId",header:["Id",{content:"textFilter"}],sort:"int",adjust:"data",hidden:!0},{id:"empresaId",header:["IdEmpresa",{content:"textFilter"}],sort:"int",adjust:"data",hidden:!0},{id:"numeroFactura",header:[{text:"Numero.",css:{"text-align":"left"}},{content:"textFilter"}],sort:"string",adjust:!0,css:{"text-align":"left"}},{id:"emisorNombre",header:["Emp.",{content:"textFilter"}],sort:"string",adjust:"data"},{id:"receptorNombre",header:["Cliente",{content:"textFilter"}],sort:"string",adjust:"data"},{id:"fecha",header:[{text:n("Fecha"),css:{"text-align":"center"}},{content:"dateFilter"}],adjust:"data",sort:"string",format:webix.i18n.dateFormatStr,css:{"text-align":"center"}},{id:"total",header:["Base",{content:"textFilter"}],sort:"int",format:webix.i18n.numberFormat,adjust:"data"},{id:"totalConIva",header:["Total",{content:"textFilter"}],sort:"int",format:webix.i18n.numberFormat,adjust:"data"},{id:"formaPagoNombre",header:["Forma de pago",{content:"textFilter"}],sort:"string",adjust:"data"},{id:"observaciones",header:["Observaciones",{content:"textFilter"}],sort:"string",fillspace:!0},{id:"actions",header:[{text:"Acciones",css:{"text-align":"center"}}],template:"<span class='onEdit mdi mdi-printer'></span>",css:{"text-align":"center"},adjust:"header"}],rightSplit:1}).scroll=!0,e.onClick={onEdit:function(e,t,n){var i=this,r=this.data.pull[t.row];l(r.empresaId).then((function(e){if(e.infFacCliRep){var t="/stireport/reports/"+e.infFacCliRep+".mrt";i.$scope.imprimirWindow.showWindow(r.facturaId,t)}else s.a.errorMessage("Esta empresa no tiene plantilla de factura asociada")})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?s.a.errorRestriccion():s.a.errorMessageAjax(e)}))}},e.editable=!0,e.editaction="dblclick",e.rules={direccionTrabajo:webix.rules.isNotEmpty},e.on={onAfterFilter:function(){webix.storage.local.put("stateGridFacturas",this.getState())}},e)]}},t.prototype.init=function(e,t){this.imprimirWindow=this.ui(f.default),$$("facturasGrid").attachEvent("onItemDblClick",(function(e,t,n){var i=this,r=this.data.pull[e.row];r=this.data.pull[e.row];l(r.empresaId).then((function(e){if(e.infFacCliRep){var t="/stireport/reports/"+e.infFacCliRep+".mrt";i.$scope.imprimirWindow.showWindow(r.facturaId,t)}else s.a.errorMessage("Esta empresa no tiene plantilla de factura asociada")})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?s.a.errorRestriccion():s.a.errorMessageAjax(e)}))}))},t.prototype.urlChange=function(e,t){var n=r.a.checkLoggedUser(),i=!1,o=n.comercialId;n.esCliente&&(i=!0,o=n.clienteId),u.languageService.setLanguage(this.app,"es"),this.load(i,o)},t.prototype.load=function(e,t){var n=this;a(e,t,7).then((function(e){e||(e=[]),e=n.formateaCampos(e),$$("facturasGrid").clearAll(),$$("facturasGrid").parse(c.a.prepareDataForDataTable("facturaId",e));var t=$$("facturasGrid").count();$$("facturasNReg").config.label="NREG: "+t,$$("facturasNReg").refresh();var i=webix.storage.local.get("stateGridFacturas");i&&n.$$("facturasGrid").setState(i)})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?s.a.errorRestriccion():s.a.errorMessageAjax(e)}))},t.prototype.formateaCampos=function(e){return e.forEach((function(e){e.emisorNombre=e.emisorNombre.substr(0,3),e.fecha=new Date(e.fecha)})),e},t.prototype.cleanAndload=function(){$$("facturasGrid").eachColumn((function(e,t){if("actions"!=t.id){var n=this.getFilter(e);n&&(n.setValue?n.setValue(""):n.value="")}})),this.load()},t.prototype.print=function(){},t}(i.c);t.default=d},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3),o=n(0),a=function(e,t){return new webix.promise((function(n,i){o.a.getConfig().then((function(n){var i=n.urlApi+"/api/clientes/activo/login",r={cliente:{login:e,password:t}};return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(i,r)})).then((function(e){n(e.json())})).catch((function(e){i(e)}))}))},s=function(e,t){return new webix.promise((function(n,i){o.a.getConfig().then((function(n){var i=n.urlApi+"/api/comerciales/login",r={login:e,password:t};return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(i,r)})).then((function(e){n(e.json())})).catch((function(e){i(e)}))}))},c=n(2);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){return u(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"layout",css:"loginBack",rows:[{},{cols:[{},{rows:[{view:"form",width:300,css:"round-border",id:"frmLogin",elements:[{view:"label",height:100,align:"center",label:"<img src='assets/img/logo.png'/>"},{view:"label",align:"center",id:"version",label:"VRS"},{view:"text",name:"login",required:!0,label:"Usuario",labelPosition:"top"},{view:"text",type:"password",name:"password",required:!0,label:"Contraseña",labelPosition:"top"},{margin:5,cols:[{view:"button",label:"Aceptar",click:this.accept,type:"form",hotkey:"enter"},{view:"button",label:"Cancelar",click:this.cancel,hotkey:"esc"}]}]}]},{}]},{}]}},t.prototype.init=function(){o.a.getVersion().then((function(e){$$("version").data.label="VRS "+e.version,$$("version").refresh()})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?c.a.errorRestriccion():c.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){},t.prototype.accept=function(){var e=this;if($$("frmLogin").validate()){var t=void 0,n=$$("frmLogin").getValues();a(n.login,n.password).then((function(i){i?((t=i).esCliente=!0,r.a.setUsuarioCookie(t),e.$scope.show("top/inicio")):s(n.login,n.password).then((function(n){n&&((t=n).esCliente=!1,r.a.setUsuarioCookie(t),e.$scope.show("top/inicio"))})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?c.a.errorRestriccion():c.a.errorMessageAjax(e)}))})).catch((function(e){-1!=e.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?c.a.errorRestriccion():c.a.errorMessageAjax(e)}))}else c.a.errorMessage("Debe rellenar los campos correctamente")},t}(i.c);t.default=f},function(e,t,n){"use strict";n.r(t);var i=n(1),r=new webix.DataCollection({data:[{id:1,title:"The Shawshank Redemption",year:1994,votes:678790,rating:9.2,rank:1},{id:2,title:"The Godfather",year:1972,votes:511495,rating:9.2,rank:2},{id:3,title:"The Godfather: Part II",year:1974,votes:319352,rating:9,rank:3},{id:4,title:"The Good, the Bad and the Ugly",year:1966,votes:213030,rating:8.9,rank:4},{id:5,title:"My Fair Lady",year:1964,votes:533848,rating:8.9,rank:5},{id:6,title:"12 Angry Men",year:1957,votes:164558,rating:8.9,rank:6}]});function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"datatable",autoConfig:!0,css:"webix_shadow_medium"}},t.prototype.init=function(e){e.parse(r)},t}(i.c);t.default=s},function(e,t,n){"use strict";n.r(t);n(28);var i=n(1),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};var o=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o={id:"REPCLIENTES",version:"1.1.0",router:i.a,debug:!1,start:"/login"};return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r({},o,n)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.b);t.default=o,webix.ready((function(){var e=new o;e.use(i.d.Locale),e.use(i.d.Theme),webix.i18n.setLocale("es-ES"),e.render()}))},function(e,t,n){},function(e,t,n){var i={"./data":26,"./data.js":26,"./facturas":24,"./facturas.js":24,"./facturasEpisReport":8,"./facturasEpisReport.js":8,"./imprimirWindow":13,"./imprimirWindow.js":13,"./inicio":14,"./inicio.js":14,"./lineasTarifaProfesion":15,"./lineasTarifaProfesion.js":15,"./login":25,"./login.js":25,"./mainFooter":11,"./mainFooter.js":11,"./mainMenu":9,"./mainMenu.js":9,"./mainToolbar":10,"./mainToolbar.js":10,"./servicios":16,"./servicios.js":16,"./serviciosForm":17,"./serviciosForm.js":17,"./start":18,"./start.js":18,"./tarifas":19,"./tarifas.js":19,"./top":20,"./top.js":20};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=29},function(e,t,n){var i={"./en":21,"./en.js":21,"./es":22,"./es.js":22,"./fr.":23,"./fr..js":23,"./language_service":4,"./language_service.js":4};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=30}]);