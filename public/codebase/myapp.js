!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/codebase/",n(n.s=20)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={getConfig:function(){return new Promise((function(t,e){webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get("/config").then((function(e){t(e.json())})).catch((function(t){e(t)}))}))},getConfigMysql:function(){return new Promise((function(t,e){webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get("/config").then((function(e){t(e.json())})).catch((function(t){e(t)}))}))},getVersion:function(){return new Promise((function(t,e){webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get("/version").then((function(e){t(e.json())})).catch((function(t){e(t)}))}))}}},function(t,e,n){"use strict";n.d(e,"d",(function(){return J})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return b}));var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function t(){a(this,t)},u=function(){function t(e){a(this,t),this.webixJet=!0,this.webix=e,this._events=[],this._subs={},this._data={}}return t.prototype.getRoot=function(){return this._root},t.prototype.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},t.prototype.setParam=function(t,e,n){if(this._data[t]!==e&&(this._data[t]=e,this._segment.update(t,e,0),n))return this.show(null)},t.prototype.getParam=function(t,e){var n=this._data[t];if(void 0!==n||!e)return n;var r=this.getParentView();return r?r.getParam(t,e):void 0},t.prototype.getUrl=function(){return this._segment.suburl()},t.prototype.getUrlString=function(){return this._segment.toString()},t.prototype.getParentView=function(){return this._parent},t.prototype.$$=function(t){if("string"==typeof t){var e=this.getRoot();return e.queryView((function(n){return(n.config.id===t||n.config.localId===t)&&n.$scope===e.$scope}),"self")}return t},t.prototype.on=function(t,e,n){var r=t.attachEvent(e,n);return this._events.push({obj:t,id:r}),r},t.prototype.contains=function(t){for(var e in this._subs){var n=this._subs[e].view;if(n===t||n.contains(t))return!0}return!1},t.prototype.getSubView=function(t){var e=this.getSubViewInfo(t);if(e)return e.subview.view},t.prototype.getSubViewInfo=function(t){var e=this._subs[t||"default"];return e?{subview:e,parent:this}:"_top"===t?(this._subs[t]={url:"",id:null,popup:!0},this.getSubViewInfo(t)):this._parent?this._parent.getSubViewInfo(t):null},t.prototype._detachEvents=function(){for(var t=this._events,e=t.length-1;e>=0;e--)t[e].obj.detachEvent(t[e].id)},t.prototype._destroySubs=function(){for(var t in this._subs){var e=this._subs[t].view;e&&e.destructor()}this._subs={}},t.prototype._init_url_data=function(){var t=this._segment.current();this._data={},this.webix.extend(this._data,t.params,!0)},t.prototype._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var t in this._subs){var e=this._subs[t];if(!e.branch&&e.view&&"_top"!==t){var n=e.view._getDefaultSub();if(n)return n}}},t.prototype._routed_view=function(){var t=this.getParentView();if(!t)return!0;var e=t._getDefaultSub();return!(!e&&e!==this)&&t._routed_view()},t}();function c(t){"/"===t[0]&&(t=t.substr(1));for(var e=t.split("/"),n=[],r=0;r<e.length;r++){var i=e[r],o={},a=i.indexOf(":");if(-1===a&&(a=i.indexOf("?")),-1!==a){var s=i.substr(a+1).split(/[\:\?\&]/g),u=Array.isArray(s),c=0;for(s=u?s:s[Symbol.iterator]();;){var p;if(u){if(c>=s.length)break;p=s[c++]}else{if((c=s.next()).done)break;p=c.value}var f=p.split("=");o[f[0]]=decodeURIComponent(f[1])}}n[r]={page:a>-1?i.substr(0,a):i,params:o,isNew:!0}}return n}function p(t){var e=[],n=t,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;e.push("/"+a.page);var s=f(a.params);s&&e.push("?"+s)}return e.join("")}function f(t){var e=[];for(var n in t)e.length&&e.push("&"),e.push(n+"="+encodeURIComponent(t[n]));return e.join("")}var l=function(){function t(e,n){a(this,t),this._next=1,this.route="string"==typeof e?{url:c(e),path:e}:e,this.index=n}return t.prototype.current=function(){return this.route.url[this.index]},t.prototype.next=function(){return this.route.url[this.index+this._next]},t.prototype.suburl=function(){return this.route.url.slice(this.index)},t.prototype.shift=function(){return new t(this.route,this.index+this._next)},t.prototype.refresh=function(){for(var t=this.route.url,e=this.index+1;e<t.length;e++)t[e].isNew=!0},t.prototype.toString=function(){var t=p(this.suburl());return t?t.substr(1):""},t.prototype._join=function(t,e){var n=this.route.url;if(null===t)return n;var r=this.route.url;if(n=r.slice(0,this.index+(e?this._next:0)),t){n=n.concat(c(t));for(var i=0;i<n.length;i++)r[i]&&(n[i].view=r[i].view),r[i]&&n[i].page===r[i].page&&(n[i].isNew=!1)}return n},t.prototype.append=function(t){var e=this._join(t,!0);return this.route.path=p(e),this.route.url=e,this.route.path},t.prototype.show=function(t,e,n){var r=this,i=this._join(t,n);return new Promise((function(t,n){var o=p(i),a={url:i,redirect:o,confirm:Promise.resolve()},u=e?e.app:null;if(u&&!u.callEvent("app:guard",[a.redirect,e,a]))return void n(new s);a.confirm.catch((function(t){return n(t)})).then((function(){if(null!==a.redirect){if(a.redirect!==o)return u.show(a.redirect),void n(new s);r.route.path=o,r.route.url=i,t()}else n(new s)}))}))},t.prototype.size=function(t){this._next=t},t.prototype.split=function(){var e={url:this.route.url.slice(this.index+1),path:""};return e.url.length&&(e.path=p(e.url)),new t(e,0)},t.prototype.update=function(t,e,n){var r=this.route.url[this.index+(n||0)];if(!r)return this.route.url.push({page:"",params:{}}),this.update(t,e,n);""===t?r.page=e:r.params[t]=e,this.route.path=p(this.route.url)},t}(),h=function(t){function e(n,r){a(this,e);var o=i(this,t.call(this,n.webix));return o.app=n,o._children=[],o}return o(e,t),e.prototype.ui=function(t,e){var n=(e=e||{}).container||t.container,i=this.app.createView(t);return this._children.push(i),i.render(n,this._segment,this),"object"!==(void 0===t?"undefined":r(t))||t instanceof u?i:i.getRoot()},e.prototype.show=function(t,e){if(e=e||{},"object"===(void 0===t?"undefined":r(t))){for(var n in t)this.setParam(n,t[n]);t=null}else{if("/"===t.substr(0,1))return this.app.show(t);if(0===t.indexOf("./")&&(t=t.substr(2)),0===t.indexOf("../")){var i=this.getParentView();return i?i.show(t.substr(3),e):this.app.show("/"+t.substr(3))}var o=this.getSubViewInfo(e.target);if(o){if(o.parent!==this)return o.parent.show(t,e);if(e.target&&"default"!==e.target)return this._renderFrameLock(e.target,o.subview,t)}else if(t)return this.app.show("/"+t)}return this._show(this._segment,t,this)},e.prototype._show=function(t,e,n){var r=this;return t.show(e,n,!0).then((function(){return r._init_url_data(),r._urlChange()})).then((function(){t.route.linkRouter&&(r.app.getRouter().set(t.route.path,{silent:!0}),r.app.callEvent("app:route",[t.route.path]))}))},e.prototype.init=function(t,e){},e.prototype.ready=function(t,e){},e.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},e.prototype.urlChange=function(t,e){},e.prototype.destroy=function(){},e.prototype.destructor=function(){this.destroy(),this._destroyKids(),this._root.destructor(),t.prototype.destructor.call(this)},e.prototype.use=function(t,e){t(this.app,this,e)},e.prototype.refresh=function(){this.getUrl();return this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},e.prototype.render=function(t,e,n){var r=this;"string"==typeof e&&(e=new l(e,0)),this._segment=e,this._parent=n,this._init_url_data();var i="string"==typeof(t=t||document.body)?this.webix.toNode(t):t;return this._container!==i?(this._container=i,this._render(e)):this._urlChange().then((function(){return r.getRoot()}))},e.prototype._render=function(t){var e=this,n=this.config();return n.then?n.then((function(n){return e._render_final(n,t)})):this._render_final(n,t)},e.prototype._render_final=function(t,e){var n=this,r=null,i=null,o=!1;if(this._container.tagName?i=this._container:(r=this._container).popup?(i=document.body,o=!0):i=this.webix.$$(r.id),!this.app||!i)return Promise.reject(null);var a=void 0,s=this._segment.current(),u={ui:{}};this.app.copyConfig(t,u.ui,this._subs),this.app.callEvent("app:render",[this,e,u]),u.ui.$scope=this,!r&&s.isNew&&s.view&&s.view.destructor();try{if(r&&!o){var c=i,p=c.getParentView();p&&"multiview"===p.name&&!u.ui.id&&(u.ui.id=c.config.id)}this._root=this.app.webix.ui(u.ui,i);var f=this._root;o&&f.setPosition&&!f.isVisible()&&f.show(),r&&(r.view&&r.view!==this&&r.view!==this.app&&r.view.destructor(),r.id=this._root.config.id,this.getParentView()||!this.app.app?r.view=this:r.view=this.app),s.isNew&&(s.view=this,s.isNew=!1),a=Promise.resolve(this._init(this._root,e)).then((function(){return n._urlChange().then((function(){return n._initUrl=null,n.ready(n._root,e.suburl())}))}))}catch(t){a=Promise.reject(t)}return a.catch((function(t){return n._initError(n,t)}))},e.prototype._init=function(t,e){return this.init(t,e.suburl())},e.prototype._urlChange=function(){var t=this;this.app.callEvent("app:urlchange",[this,this._segment]);var e=[];for(var n in this._subs){var r=this._subs[n],i=this._renderFrameLock(n,r,null);i&&e.push(i)}return Promise.all(e).then((function(){return t.urlChange(t._root,t._segment.suburl())}))},e.prototype._renderFrameLock=function(t,e,n){if(!e.lock){var r=this._renderFrame(t,e,n);r&&(e.lock=r.then((function(){return e.lock=null}),(function(){return e.lock=null})))}return e.lock},e.prototype._renderFrame=function(t,e,n){var r=this;if("default"===t){if(this._segment.next())return this._createSubView(e,this._segment.shift());e.view&&e.popup&&(e.view.destructor(),e.view=null)}if(null!==n&&(e.url=n),e.route){if(null!==n)return e.route.show(n,e.view).then((function(){return r._createSubView(e,e.route)}));if(e.branch)return}var i=e.view;if(!i&&e.url){if("string"==typeof e.url)return e.route=new l(e.url,0),this._createSubView(e,e.route);"function"!=typeof e.url||i instanceof e.url||(i=new e.url(this.app,"")),i||(i=e.url)}if(i)return i.render(e,e.route||this._segment,this)},e.prototype._initError=function(t,e){return this.app&&this.app.error("app:error:initview",[e,t]),!0},e.prototype._createSubView=function(t,e){var n=this;return this.app.createFromURL(e.current()).then((function(r){return r.render(t,e,n)}))},e.prototype._destroyKids=function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e]&&t[e].destructor&&t[e].destructor();this._children=[]},e}(u),d=function(t){function e(n,r){a(this,e);var o=i(this,t.call(this,n,r));return o._ui=r.ui,o}return o(e,t),e.prototype.config=function(){return this._ui},e}(h),g=function(){function t(e,n,r){a(this,t),this.path="",this.app=r}return t.prototype.set=function(t,e){this.path=t;var n=this.app;n.app.getRouter().set(n._segment.append(this.path),{silent:!0})},t.prototype.get=function(){return this.path},t}(),m=!0,v=function(t){function e(n){a(this,e);var r=(n||{}).webix||window.webix,o=i(this,t.call(this,r));return o.config=o.webix.extend({name:"App",version:"1.0",start:"/home"},n,!0),o.app=o.config.app,o.ready=Promise.resolve(),o._services={},o.webix.extend(o,o.webix.EventSystem),o}return o(e,t),e.prototype.getUrl=function(){return this._subSegment.suburl()},e.prototype.getUrlString=function(){return this._subSegment.toString()},e.prototype.getService=function(t){var e=this._services[t];return"function"==typeof e&&(e=this._services[t]=e(this)),e},e.prototype.setService=function(t,e){this._services[t]=e},e.prototype.destructor=function(){this.getSubView().destructor(),t.prototype.destructor.call(this)},e.prototype.copyConfig=function(t,e,n){if((t instanceof u||"function"==typeof t&&t.prototype instanceof u)&&(t={$subview:t}),void 0!==t.$subview)return this.addSubView(t,e,n);for(var i in e=e||(t instanceof Array?[]:{}),t){var o=t[i];if("function"==typeof o&&o.prototype instanceof u&&(o={$subview:o}),!o||"object"!==(void 0===o?"undefined":r(o))||o instanceof this.webix.DataCollection||o instanceof RegExp||o instanceof Map)e[i]=o;else if(o instanceof Date)e[i]=new Date(o);else{var a=this.copyConfig(o,o instanceof Array?[]:{},n);null!==a&&(e[i]=a)}}return e},e.prototype.getRouter=function(){return this.$router},e.prototype.clickHandler=function(t,e){if(t&&(e=e||t.target||t.srcElement)&&e.getAttribute){var n=e.getAttribute("trigger");if(n)return this._forView(e,(function(t){return t.app.trigger(n)})),t.cancelBubble=!0,t.preventDefault();var r=e.getAttribute("route");if(r)return this._forView(e,(function(t){return t.show(r)})),t.cancelBubble=!0,t.preventDefault()}var i=e.parentNode;i&&this.clickHandler(t,i)},e.prototype.getRoot=function(){return this.getSubView().getRoot()},e.prototype.refresh=function(){var t=this;return this._subSegment?this.getSubView().refresh().then((function(e){return t.callEvent("app:route",[t.getUrl()]),e})):Promise.resolve(null)},e.prototype.loadView=function(t){var e=this,n=this.config.views,r=null;if(""===t)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{n&&"string"==typeof(r="function"==typeof n?n(t):n[t])&&(t=r,r=null),r||(r="_blank"===t?{}:this._loadViewDynamic(t))}catch(e){r=this._loadError(t,e)}return r.then||(r=Promise.resolve(r)),r=r.then((function(t){return t.__esModule?t.default:t})).catch((function(n){return e._loadError(t,n)}))},e.prototype._forView=function(t,e){var n=this.webix.$$(t);n&&e(n.$scope)},e.prototype._loadViewDynamic=function(t){return null},e.prototype.createFromURL=function(t){var e=this;return t.isNew||!t.view?this.loadView(t.page).then((function(t){return e.createView(t,name)})):Promise.resolve(t.view)},e.prototype.createView=function(t,n){if("function"==typeof t){if(t.prototype instanceof e)return new t({app:this,name:n,router:g});if(t.prototype instanceof u)return new t(this,{name:n});t=t(this)}return t instanceof u?t:new d(this,{name:n,ui:t})},e.prototype.show=function(t){return this.render(this._container,t||this.config.start)},e.prototype.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.apply(t,n)},e.prototype.apply=function(t,e){this.callEvent(t,e)},e.prototype.action=function(t){return this.webix.bind((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];this.apply(t,n)}),this)},e.prototype.on=function(t,e){this.attachEvent(t,e)},e.prototype.use=function(t,e){t(this,null,e)},e.prototype.error=function(t,e){if(this.callEvent(t,e),this.callEvent("app:error",e),this.config.debug)for(var n=0;n<e.length;n++)if(console.error(e[n]),e[n]instanceof Error){var r=e[n].message;0===r.indexOf("Module build failed")?(r=r.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+r+"</pre>"):(r+="<br><br>Check console for more details",this.webix.message({type:"error",text:r,expire:-1}))}},e.prototype.render=function(t,e,n){var r=this;this._container="string"==typeof t?this.webix.toNode(t):t||document.body;var i=null;!this.$router?(m&&"tagName"in this._container&&(this.webix.event(document.body,"click",(function(t){return r.clickHandler(t)})),m=!1),"string"==typeof e&&(e=new l(e,0)),this._subSegment=this._first_start(e),this._subSegment.route.linkRouter=!0):i="string"==typeof e?e:this.app?e.split().route.path||this.config.start:e.toString();var o=this.getSubView(),a=this._subSegment,s=a.show(i,o).then((function(){return r.createFromURL(a.current())})).then((function(e){return e.render(t,a)})).then((function(t){return r.$router.set(a.route.path,{silent:!0}),r.callEvent("app:route",[r.getUrl()]),t}));return this.ready=this.ready.then((function(){return s})),s},e.prototype.getSubView=function(){if(this._subSegment){var t=this._subSegment.current().view;if(t)return t}return new h(this,{})},e.prototype._first_start=function(t){var e=this;this._segment=t;if(this.$router=new this.config.router((function(t){return setTimeout((function(){e.show(t).catch((function(t){if(!(t instanceof s))throw t}))}),1)}),this.config,this),this._container===document.body&&!1!==this.config.animation){var n=this._container;this.webix.html.addCss(n,"webixappstart"),setTimeout((function(){e.webix.html.removeCss(n,"webixappstart"),e.webix.html.addCss(n,"webixapp")}),10)}if(t)this.app&&(t.current().view=this,t.next()?(t.refresh(),t=t.split()):t=new l(this.config.start,0));else{var r=this.$router.get();r||(r=this.config.start,this.$router.set(r,{silent:!0})),t=new l(r,0)}return t},e.prototype._loadError=function(t,e){return this.error("app:error:resolve",[e,t]),{template:" "}},e.prototype.addSubView=function(t,e,n){var r=!0!==t.$subview?t.$subview:null,i=t.name||(r?this.webix.uid():"default");return e.id=t.id||"s"+this.webix.uid(),(n[i]={id:e.id,url:r,branch:t.branch,popup:t.popup}).popup?null:e},e}(u),b=function(){function t(e,n){var r=this;a(this,t),this.config=n||{},this._detectPrefix(),this.cb=e,window.onpopstate=function(){return r.cb(r.get())}}return t.prototype.set=function(t,e){var n=this;if(this.config.routes){var r=t.split("?",2);for(var i in this.config.routes)if(this.config.routes[i]===r[0]){t=i+(r.length>1?"?"+r[1]:"");break}}this.get()!==t&&window.history.pushState(null,null,this.prefix+this.sufix+t),e&&e.silent||setTimeout((function(){return n.cb(t)}),1)},t.prototype.get=function(){var t=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(t="/"!==t&&"#"!==t?t:"",this.config.routes){var e=t.split("?",2),n=this.config.routes[e[0]];n&&(t=n+(e.length>1?"?"+e[1]:""))}return t},t.prototype._detectPrefix=function(){var t=this.config.routerPrefix;this.sufix="#"+(void 0===t?"!":t),this.prefix=document.location.href.split("#",2)[0]},t.prototype._getRaw=function(){return document.location.href},t}(),w=!1;function y(t){if(!w&&t){w=!0;var e=window;e.Promise||(e.Promise=t.promise);var n=t.version.split(".");10*n[0]+1*n[1]<53&&(t.ui.freeze=function(e){var n=e();return n&&n.then?n.then((function(e){return t.ui.$freeze=!1,t.ui.resize(),e})):(t.ui.$freeze=!1,t.ui.resize()),n});var i=t.ui.baselayout.prototype.addView,o=t.ui.baselayout.prototype.removeView,a={addView:function(t,e){var n=this;if(!this.$scope||!this.$scope.webixJet||t.queryView)return i.apply(this,arguments);var o=function(){var r=n.$scope,o={};t=r.app.copyConfig(t,{},o),i.apply(n,[t,e]);var a=function(t){r._renderFrame(t,o[t],null).then((function(){r._subs[t]=o[t]}))};for(var s in o)a(s);return{v:t.id}}();return"object"===(void 0===o?"undefined":r(o))?o.v:void 0},removeView:function(){if(o.apply(this,arguments),this.$scope&&this.$scope.webixJet){var e=this.$scope._subs;for(var n in e){var r=e[n];t.$$(r.id)||(r.view.destructor(),delete e[n])}}}};t.extend(t.ui.layout.prototype,a,!0),t.extend(t.ui.baselayout.prototype,a,!0),t.protoUI({name:"jetapp",$init:function(e){this.$app=new this.app(e);var n=t.uid().toString();for(var r in e.body={id:n},this.$ready.push((function(){this.$app.render({id:n})})),this.$app){var i=this.$app[r];"function"!=typeof i||this[r]||(this[r]=i.bind(this.$app))}}},t.ui.proxy)}}var _=function(t){function e(n){a(this,e),n.router=n.router||b;var r=i(this,t.call(this,n));return y(r.webix),r}return o(e,t),e.prototype._loadViewDynamic=function(t){return t=t.replace(/\./g,"/"),n(22)("./"+t)},e}(v);(function(){function t(e,n,r){a(this,t),this.storage=n.storage||r.webix.storage.session,this.name=n.storeName||n.id+":route",this.cb=e}t.prototype.set=function(t,e){var n=this;this.storage.put(this.name,t),e&&e.silent||setTimeout((function(){return n.cb(t)}),1)},t.prototype.get=function(){return this.storage.get(this.name)}})(),function(t){function e(){return a(this,e),i(this,t.apply(this,arguments))}o(e,t),e.prototype._detectPrefix=function(){this.prefix="",this.sufix=this.config.routerPrefix||""},e.prototype._getRaw=function(){return document.location.pathname+(document.location.search||"")}}(b),function(){function t(e,n){a(this,t),this.path="",this.cb=e}t.prototype.set=function(t,e){var n=this;this.path=t,e&&e.silent||setTimeout((function(){return n.cb(t)}),1)},t.prototype.get=function(){return this.path}}();function x(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S(t,e,n){for(var r in t)x(t,r)&&e.call(n||t,t[r],r,t)}function j(t){t="Warning: "+t,"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(t){}}var E=String.prototype.replace,C=String.prototype.split,O=function(t){var e=t%10;return 11!==t&&1===e?0:2<=e&&e<=4&&!(t>=12&&t<=14)?1:2},k={arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:O,chinese:function(){return 0},croatian:O,french:function(t){return t>1?1:0},german:function(t){return 1!==t?1:0},russian:O,lithuanian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){if(1===t)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0},slovenian:function(t){var e=t%100;return 1===e?0:2===e?1:3===e||4===e?2:3}},R={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function P(t){var e,n=(e={},S(R,(function(t,n){S(t,(function(t){e[t]=n}))})),e);return n[t]||n[C.call(t,/-/,1)[0]]||n.en}function $(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var A=/\$/g,T=/%\{(.*?)\}/g;function F(t,e,n,r){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var i=t,o=r||T,a="number"==typeof e?{smart_count:e}:e;if(null!=a.smart_count&&i){var s=C.call(i,"||||");i=(s[function(t,e){return k[P(t)](e)}(n||"en",a.smart_count)]||s[0]).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return i=E.call(i,o,(function(t,e){return x(a,e)&&null!=a[e]?E.call(a[e],A,"$$"):t}))}function M(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var n=e.allowMissing?F:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:n,this.warn=e.warn||j,this.tokenRegex=function(t){var e=t&&t.prefix||"%{",n=t&&t.suffix||"}";if("||||"===e||"||||"===n)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp($(e)+"(.*?)"+$(n),"g")}(e.interpolation)}M.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},M.prototype.extend=function(t,e){S(t,(function(t,n){var i=e?e+"."+n:n;"object"===(void 0===t?"undefined":r(t))?this.extend(t,i):this.phrases[i]=t}),this)},M.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:S(t,(function(t,n){var i=e?e+"."+n:n;"object"===(void 0===t?"undefined":r(t))?this.unset(t,i):delete this.phrases[i]}),this)},M.prototype.clear=function(){this.phrases={}},M.prototype.replace=function(t){this.clear(),this.extend(t)},M.prototype.t=function(t,e){var n,r,i=null==e?{}:e;if("string"==typeof this.phrases[t])n=this.phrases[t];else if("string"==typeof i._)n=i._;else if(this.onMissingKey){r=(0,this.onMissingKey)(t,i,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+t+'"'),r=t;return"string"==typeof n&&(r=F(n,i,this.currentLocale,this.tokenRegex)),r},M.prototype.has=function(t){return x(this.phrases,t)},M.transformPhrase=function(t,e,n){return F(t,e,n)};var V=M;function D(t,e,n){if(e.urls)n=e.urls[n]||n;else if(e.param){var r;(r={})[e.param]=n,n=r}t.show(n)}var N={good:"check",error:"warning",saving:"refresh fa-spin"},U={good:"Ok",error:"Error",saving:"Connecting..."};function L(t,e,n){for(var r=0;r<n.length;r++)t[n[r]]=e[r+1]?e[r+1].page:""}var I=window.webix;I&&y(I);var J={UnloadGuard:function(t,e,n){e.on(t,"app:guard",(function(t,r,i){if(r===e||r.contains(e)){var o=n();i.confirm=!1===o?Promise.reject(new s):i.confirm.then((function(){return o}))}}))},Locale:function(t,e,r){var i=(r=r||{}).storage,o=i?i.get("lang")||"en":r.lang||"en";function a(e,n,a){n.__esModule&&(n=n.default);var s={phrases:n};r.polyglot&&t.webix.extend(s,r.polyglot);var c=u.polyglot=new V(s);if(c.locale(e),u._=t.webix.bind(c.t,c),o=e,i&&i.put("lang",o),r.webix){var p=r.webix[e];p&&t.webix.i18n.setLocale(p)}return a?Promise.resolve():t.refresh()}function s(t,e){if(!1!==r.path){var i=(r.path?r.path+"/":"")+t;a(t,n(23)("./"+i),e)}}var u={getLang:function(){return o},setLang:s,setLangData:a,_:null,polyglot:null};t.setService("locale",u),s(o,!0)},Menu:function(t,e,n){var r=e.getSubViewInfo().parent,i=e.$$(n.id||n),o=!1;i.attachEvent("onchange",(function(){o||D(r,n,this.getValue())})),i.attachEvent("onafterselect",(function(){if(!o){var t=null;i.setValue?t=this.getValue():i.getSelectedId&&(t=i.getSelectedId()),D(r,n,t)}})),e.on(t,"app:route",(function(){var t="";if(n.param)t=e.getParam(n.param,!0);else{var a=r.getUrl()[1];a&&(t=a.page)}t&&(o=!0,i.setValue&&i.getValue()!==t?i.setValue(t):i.select&&i.exists(t)&&i.getSelectedId()!==t&&i.select(t),o=!1)}))},Theme:function(t,e,n){var r=(n=n||{}).storage,i=r?r.get("theme")||"flat-default":n.theme||"flat-default",o={getTheme:function(){return i},setTheme:function(e,n){for(var o=e.split("-"),a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var u=a[s].getAttribute("title");u&&(u===e||u===o[0]?a[s].disabled=!1:a[s].disabled=!0)}t.webix.skin.set(o[0]),t.webix.html.removeCss(document.body,"theme-"+i),t.webix.html.addCss(document.body,"theme-"+e),i=e,r&&r.put("theme",e),n||t.refresh()}};t.setService("theme",o),o.setTheme(i,!0)},User:function(t,e,n){var r=(n=n||{}).login||"/login",i=n.logout||"/logout",o=n.afterLogin||t.config.start,a=n.afterLogout||"/login",s=n.ping||3e5,u=n.model,c=n.user,p={getUser:function(){return c},getStatus:function(t){return t?u.status().catch((function(){return null})).then((function(t){c=t})):null!==c},login:function(e,n){return u.login(e,n).then((function(e){if(c=e,!e)throw new Error("Access denied");t.callEvent("app:user:login",[c]),t.show(o)}))},logout:function(){return c=null,u.logout().then((function(e){return t.callEvent("app:user:logout",[]),e}))}};function f(t,e){t===i?(p.logout(),e.redirect=a):t===r||p.getStatus()||(e.redirect=r)}t.setService("user",p),t.attachEvent("app:guard",(function(t,e,r){return!(!n.public||!n.public(t))||(void 0===c&&(r.confirm=p.getStatus(!0).then((function(){return f(t,r)}))),f(t,r))})),s&&setInterval((function(){return p.getStatus(!0)}),s)},Status:function(t,e,n){var r="good",i=0,o=!1,a=n.expire;a||!1===a||(a=2e3);var s=n.texts||U,u=n.icons||N;function c(t){var i=e.$$(n.target);i&&(t||(t="<div class='status_"+r+"'><span class='webix_icon fa-"+u[r]+"'></span> "+s[r]+"</div>"),i.setHTML(t))}function p(){i--,d("good")}function f(t){i--,d("error",t)}function l(t){i++,d("saving"),t&&t.then&&t.then(p,f)}function h(){0===i&&c(" ")}function d(e,n){i<0&&(i=0),"saving"===e?(r="saving",c()):(o="error"===e,0===i&&(r=o?"error":"good",o?t.error("app:error:server",[n.responseText||n]):a&&setTimeout(h,a),c()))}function g(n){var r=t.webix.dp(n);r&&(e.on(r,"onAfterDataSend",l),e.on(r,"onAfterSaveError",(function(t,e,n){return f(n)})),e.on(r,"onAfterSave",p))}"string"==typeof n&&(n={target:n}),t.setService("status",{getStatus:function(){return r},setStatus:d,track:g}),n.remote&&e.on(t.webix,"onRemoteCall",l),n.ajax&&e.on(t.webix,"onBeforeAjax",(function(t,e,n,r,i,o,a){l(a)})),n.data&&g(n.data)},UrlParam:function(t,e,n){var r=n.route||n,i={};e.on(t,"app:urlchange",(function(t,n){e===t&&(L(i,n.suburl(),r),n.size(r.length+1))}));var o=e.setParam,a=e.getParam;e.setParam=function(t,n,a){var s=r.indexOf(t);return s>=0?(i[t]=n,this._segment.update("",n,s+1),a?e.show(null):void 0):o.call(this,t,n,a)},e.getParam=function(t,e){var n=i[t];return void 0!==n?n:a.call(this,t,e)},L(i,e.getUrl(),r)}},z=window;z.Promise||(z.Promise=z.webix.promise)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(0);var r={errorMessageAjax:function(t){var e=t.response;webix.alert({type:"alert-error",title:"ERROR",text:e})},errorMessage:function(t){webix.alert({type:"alert-error",title:"ERROR",text:t})},normalMessage:function(t){webix.alert({title:"INFORMATION",text:t})},errorRestriccion:function(){webix.alert({title:"INFORMATION",text:"Hay registros dependientes de esta entrada. No se puede eliminar."})}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(5),i=n(0),o={getUsuarioCookie:function(){var t=r.a.getCookie("usuarioComercializa");return t?JSON.parse(t):null},setUsuarioCookie:function(t){r.a.setCookie("usuarioComercializa",JSON.stringify(t),1)},deleteUsuarioCookie:function(t){r.a.deleteCookie("usuarioComercializa")},checkLoggedUser:function(){var t=o.getUsuarioCookie();return t||(window.open("/#!/login","_blank"),window.close(),!1)},getLogin:function(t,e){return new webix.promise((function(n,r){i.a.getConfig().then((function(n){var r=n.urlApi+"/api/usuarios/login",i={usuario:{login:t,password:e}};return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(r,i)})).then((function(t){n(t.json())})).catch((function(t){r(t)}))}))},getUsuarios:function(){return new webix.promise((function(t,e){i.a.getConfig().then((function(t){var e=t.urlApi+"/api/usuarios/";return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(e)})).then((function(e){t(e.json())})).catch((function(t){e(t)}))}))},getUsuario:function(t){return new webix.promise((function(e,n){i.a.getConfig().then((function(e){var n=e.urlApi+"/api/usuarios/"+t;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(n)})).then((function(t){e(t.json())})).catch((function(t){n(t)}))}))},getDepartamentosAsociados:function(t){return new webix.promise((function(e,n){i.a.getConfig().then((function(e){var n=e.urlApi+"/api/usuarios/departamentos/"+t;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(n)})).then((function(t){e(t.json())})).catch((function(t){n(t)}))}))},postUsuario:function(t){return new webix.promise((function(e,n){i.a.getConfig().then((function(e){var n=e.urlApi+"/api/usuarios/";return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(n,{usuario:t})})).then((function(t){e(t.json())})).catch((function(t){n(t)}))}))},postUsuarioDepartamento:function(t){return new webix.promise((function(e,n){i.a.getConfig().then((function(e){var n=e.urlApi+"/api/usuarios/departamento";return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(n,{departamento:t})})).then((function(t){e(t.json())})).catch((function(t){n(t)}))}))},putUsuario:function(t){return new webix.promise((function(e,n){i.a.getConfig().then((function(e){var n=e.urlApi+"/api/usuarios/"+t.usuarioId;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).put(n,{usuario:t})})).then((function(t){e(t.json())})).catch((function(t){n(t)}))}))},putUsuarioDepartamento:function(t,e){return new webix.promise((function(n,r){i.a.getConfig().then((function(n){var r=n.urlApi+"/api/usuarios/departamento/"+t;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).put(r,{departamento:e})})).then((function(t){n(t.json())})).catch((function(t){r(t)}))}))},deleteUsuario:function(t){return new webix.promise((function(e,n){i.a.getConfig().then((function(e){var n=e.urlApi+"/api/usuarios/"+t;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).del(n)})).then((function(t){e(t.json())})).catch((function(t){n(t)}))}))},deleteUsuarioDepartamento:function(t){return new webix.promise((function(e,n){i.a.getConfig().then((function(e){var n=e.urlApi+"/api/usuarios/departamento/"+t;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).del(n)})).then((function(t){e(t.json())})).catch((function(t){n(t)}))}))},prepareDataForCombo:function(){return[{id:1,value:"Usuario"},{id:2,value:"Jefe de Equipo"},{id:3,value:"Vigilante"}]}}},function(t,e,n){"use strict";n.r(e),n.d(e,"languageService",(function(){return o}));var r=n(1),i={es:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",am:null,pm:null,price:"{obj} €",calendar:{monthFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthShort:["En","Feb","Mar","Abr","Mayo","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayFull:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],dayShort:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"]},hours:"Horas ",minutes:"Minutos",done:"Listo",controls:{select:"Seleccione"}},en:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",am:null,pm:null,price:"{obj} €",calendar:{monthFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthShort:["En","Feb","Mar","Abr","Mayo","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayFull:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],dayShort:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"]},hours:"Horas ",minutes:"Minutos",done:"Listo",controls:{select:"Seleccione"}},fr:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",am:null,pm:null,price:"{obj} €",calendar:{monthFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthShort:["En","Feb","Mar","Abr","Mayo","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayFull:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],dayShort:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"]},hours:"Horas ",minutes:"Minutos",done:"Listo",controls:{select:"Seleccione"}}},o={setLanguage:function(t,e){t.use(r.d.Locale,{lang:e}),webix.i18n.locales[e]=i[e],webix.i18n.setLocale(e)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={areCookiesEnabled:function(){var t=!!navigator.cookieEnabled;return void 0!==navigator.cookieEnabled||t||(document.cookie="testcookie",t=-1!=document.cookie.indexOf("testcookie")),t},setCookie:function(t,e,n){r.areCookiesEnabled()||alert("NO COOKIES");var i=new Date;i.setDate(i.getDate()+n);var o=encodeURI(e)+(null==n?"":"; expires="+i.toUTCString());document.cookie=t+"="+o},deleteCookie:function(t){r.areCookiesEnabled()||alert("NO COOKIES"),document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},getCookie:function(t){var e,n,r,i=document.cookie.split(";");for(e=0;e<i.length;e++)if(n=i[e].substr(0,i[e].indexOf("=")),r=i[e].substr(i[e].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==t)return decodeURI(r)}}},function(t,e,n){"use strict";n.r(e);var r,i=n(1),o=(n(3),n(0));function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),s(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){return{view:"window",id:"facturasEpisReport",position:"center",move:!0,resize:!0,scroll:"y",fullscreen:!0,head:{view:"toolbar",cols:[{view:"label",label:(0,this.app.getService("locale")._)("IMPRESIÓN DE ENTREGAS")},{view:"icon",icon:"mdi mdi-close",click:function(){$$("facturasEpisReport").hide()}}]},modal:!0,body:{template:"<div id='report_viewer'></div>"}}},e.prototype.init=function(t,e){o.a.getConfigMysql().then((function(t){r=t})).catch((function(t){fail(t)}))},e.prototype.showWindow=function(t,e){$$("facturasEpisReport").show();var n=new Stimulsoft.Viewer.StiViewerOptions;Stimulsoft.Base.StiLicense.key="6vJhGtLLLz2GNviWmUTrhSqnOItdDwjBylQzQcAOiHltN9ZO4D78QwpEoh6+UpBm5mrGyhSAIsuWoljPQdUv6R6vgviStsx8W3jirJvfPH27oRYrC2WIPEmaoAZTNtqb+nDxUpJlSmG62eA46oRJDV8kJ2cJSEx19GMJXYgZvv7yQT9aJHYaSrTVD7wdhpNVS1nQC3OtisVd7MQNQeM40GJxcZpyZDPfvld8mK6VX0RTPJsQZ7UcCEH4Y3LaKzA5DmUS+mwSnjXz/JFv1uO2JNkfcioieXfYfTaBIgZlKecarCS5vBgMrXly3m5kw+YwpJ2v+cMXuDk3UrZgrdxNnOhg8ZHPg9ijHxqUomZZBzKpVQU0d06ne60j/liMH5KirAI2JCVfBcBvIcyliJos8LAWr9q/1sPR9y7LmA1eyS1/dXaxmEaqi5ubhLqlf+OS0xFX6tlBBgegqHlIj6Fytwvq5YlGAZ0Cra05JhnKh/ohYlADQz6Jbg5sOKyn5EbejvPS3tWr0LRBH2FO6+mJaSEAwzGmoWT057ScSvGgQmfx8wCqSF+PgK/zTzjy75Oh",StiOptions.WebServer.url=r.report.stiUrl,n.appearance.scrollbarsMode=!0,n.appearance.fullScreenMode=!0,n.toolbar.showSendEmailButton=!0;var i=new Stimulsoft.Viewer.StiViewer(n,"StiViewer",!1),o=new Stimulsoft.Report.StiReport;o.loadFile(e);r.report.host;r.report.database,r.report.user,r.report.password;for(var a=0;a<o.dataSources.items.length;a++)o.dataSources.items[a].sqlCommand;var s=o.dataSources.items[0].sqlCommand;s=s+" WHERE pf.facturaId = "+t,o.dataSources.items[0].sqlCommand=s,i.report=o,i.renderHtml("report_viewer")},e.prototype.cancel=function(){$$("facturasEpisReport").hide()},e}(i.c);e.default=u},function(t,e,n){"use strict";n.r(e);var r=n(1);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this.app.getService("locale")._;return{view:"sidebar",width:280,id:"main:menu",activeTitle:!0,select:!0,data:[{id:"inicio",icon:"mdi mdi-home",value:"Inicio"},{id:"facturacion",icon:"mdi mdi-book",value:t("Facturación"),open:!0,data:[{id:"facturas",icon:"mdi mdi-currency-eur",value:t("Facturas")}]}]}},e.prototype.init=function(){this.use(r.d.Menu,"main:menu")},e}(r.c);e.default=a},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(3),o=n(4);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),s(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this,e=this.app,n=(e.getService("locale"),e.getService("theme"),i.a.getUsuarioCookie());this.app.getService("locale")._;return{view:"toolbar",height:60,elements:[{view:"button",type:"icon",icon:"mdi mdi-menu",width:37,align:"left",click:function(){$$("main:menu").toggle()}},{view:"label",label:"<a href='#!/top/inicio'><img src='assets/img/logo.png' height='50' /></a>",width:150},{view:"button",type:"icon",icon:"mdi mdi-account-key mdi-36px",width:50},{height:46,id:"person_template",css:"header_person",borderless:!0,data:n,template:function(t){var e="<div style='height:100%;width:100%;'>";return e+="<span class='name'>"+t.nombre+"</span> </div>"}},{view:"label",label:"\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t<img style=\"vertical-align:middle\" src='assets/img/handshake.png' height='35' />\n\t\t\t\t\t\t<span>"+this.app.config.name+"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t",width:200},{view:"button",type:"icon",icon:"mdi mdi-exit-run mdi-36px",width:50,align:"right",tooltip:"Salir",click:function(){i.a.deleteUsuarioCookie(),t.show("/login")}}]}},e.prototype.init=function(){i.a.checkLoggedUser(),o.languageService.setLanguage(this.app,"es")},e}(r.c);e.default=u},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(3),o=(n(5),n(0)),a=function(){return new webix.promise((function(t,e){o.a.getConfig().then((function(t){var e=t.urlApi+"/api/version";return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(e,null)})).then((function(e){t(e.json())})).catch((function(t){e(t)}))}))};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){return s(this,e),u(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this.app;t.getService("locale"),t.getService("theme"),i.a.getUsuarioCookie(),this.app.getService("locale")._;return{view:"label",id:"vers",align:"center",label:"NREG: ",height:60,minWidth:100}},e.prototype.init=function(){a().then((function(t){$$("vers").config.label="Proasistencia "+t.version+" - Aplicación general © Ariadna Software S.L. 2016-2017",$$("vers").refresh()})).catch((function(t){-1!=t.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?messageApi.errorRestriccion():messageApi.errorMessageAjax(t)}))},e}(r.c);e.default=c},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(0);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var s=function(t){function e(){return o(this,e),a(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){return{view:"window",id:"imprimirWindow",position:"center",move:!0,resize:!0,fullscreen:!0,head:{view:"toolbar",cols:[{view:"label",label:(0,this.app.getService("locale")._)("IMPRESIÓN DE FACTURAS")},{view:"icon",icon:"mdi mdi-close",click:function(){$$("imprimirWindow").hide()}}]},modal:!0,body:{template:"<div id='report_viewer'></div>"}}},e.prototype.init=function(t,e){i.a.getConfigMysql().then((function(t){myconfig=t})).catch((function(t){fail(t)}))},e.prototype.showWindow=function(t,e){},e.prototype.cancel=function(){$$("imprimirWindow").hide()},e}(r.c);e.default=s},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(3),o=n(4);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),s(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){this.app.getService("locale")._;return{view:"iframe",id:"frame-body",src:""}},e.prototype.init=function(){i.a.checkLoggedUser(),o.languageService.setLanguage(this.app,"es")},e}(r.c);e.default=u},function(t,e,n){"use strict";n.r(e),e.default={template:"Start page",css:"webix_shadow_medium app_start"}},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(7),o=n(8),a=n(9);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){return s(this,e),u(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){return{type:"view",rows:[o.default,{cols:[i.default,{view:"resizer",id:"resizer"},{$subview:!0}]},a.default]}},e.prototype.init=function(){},e}(r.c);e.default=c},function(t,e){},function(t,e,n){"use strict";n.r(e),e.default={Inicio:"Inicio","Nombre usuario":"Nombre usuario","Administración":"Administración",Salir:"Salir","Facturación":"Facturación",Facturas:"Facturas","Refrescar la lista (Ctrl+R)":"Refrescar la lista (Ctrl+R)","Descargar como Excel":"Descargar como Excel",Fecha:"Fecha","IMPRESIÓN DE ENTREGAS":"IMPRESIÓN DE ENTREGAS"}},function(t,e,n){"use strict";n.r(e),e.default={"Ancient Dashboard":"Ancient Dashboard"}},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(3),o=n(0),a=function(t,e,n){return new webix.promise((function(r,i){o.a.getConfig().then((function(r){var i=r.urlApi+"/api/facturas/cliente-agente/recupera/todas/"+e+"/"+n+"/"+t;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(i)})).then((function(t){r(t.json())})).catch((function(t){i(t)}))}))},s=n(2),u=function(t,e){var n=[];return e.forEach((function(e){e.id=e[t],n.push(e)})),n},c=n(4),p=function(t){return new webix.promise((function(e,n){o.a.getConfig().then((function(e){var n=e.urlApi+"/api/empresas/"+t;return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(n)})).then((function(t){e(t.json())})).catch((function(t){n(t)}))}))},f=n(6);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var d=function(t){function e(){return l(this,e),h(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t,e=this,n=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-file",width:37,align:"left"},{view:"label",label:"Facturas de cobros"}]},{cols:[{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+R",tooltip:n("Refrescar la lista (Ctrl+R)"),click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",tooltip:n("Descargar como Excel"),click:function(){webix.toExcel($$("facturasGrid"),{filename:"facturas",name:"Partes",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"facturasNReg",label:"NREG: "},{view:"pager",id:"mypager1",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},((t={view:"datatable",css:{"font-size":"0.9em","font-weight":"bold"},id:"facturasGrid",scroll:"x,y",pager:"mypager1",select:"row",columns:[{id:"facturaId",header:["Id",{content:"textFilter"}],sort:"int",width:50,hidden:!0},{id:"empresaId",header:["IdEmpresa",{content:"textFilter"}],sort:"int",width:50,hidden:!0},{id:"numero",header:[{text:"Numero.",css:{"text-align":"left"}},{content:"textFilter"}],sort:"string",width:180,css:{"text-align":"left"}},{id:"emisorNombre",header:["Emp.",{content:"textFilter"}],sort:"string",width:50},{id:"receptorNombre",header:["Cliente",{content:"textFilter"}],sort:"string",width:250},{id:"fecha",header:[{text:n("Fecha"),css:{"text-align":"center"}},{content:"dateFilter"}],width:83,sort:"string",format:webix.i18n.dateFormatStr,css:{"text-align":"center"}},{id:"total",header:["Base",{content:"textFilter"}],sort:"int",format:webix.i18n.numberFormat,width:70},{id:"totalConIva",header:["Total",{content:"textFilter"}],sort:"int",format:webix.i18n.numberFormat,width:70},{id:"formaPagoNombre",header:["Forma de pago",{content:"textFilter"}],sort:"string",width:150},{id:"observaciones",header:["Observaciones",{content:"textFilter"}],sort:"string",width:250},{id:"actions",header:[{text:"Acciones",css:{"text-align":"center"}}],template:"<span class='onEdit mdi mdi-printer'></span>",css:{"text-align":"center"},width:65}],rightSplit:1}).scroll=!0,t.onClick={onEdit:function(t,e,n){var r=this,i=this.data.pull[e.row];p(i.empresaId).then((function(t){if(t.infFacCliRep){var e="/stireport/reports/"+t.infFacCliRep+".mrt";r.$scope.imprimirWindow.showWindow(i.facturaId,e)}else s.a.errorMessage("Esta empresa no tiene plantilla de factura asociada")})).catch((function(t){-1!=t.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?s.a.errorRestriccion():s.a.errorMessageAjax(t)}))}},t.editable=!0,t.editaction="dblclick",t.rules={direccionTrabajo:webix.rules.isNotEmpty},t.on={onAfterFilter:function(){webix.storage.local.put("stateGridFacturas",this.getState())}},t)]}},e.prototype.init=function(t,e){this.imprimirWindow=this.ui(f.default),$$("facturasGrid").attachEvent("onItemDblClick",(function(t,e,n){var r=this,i=this.data.pull[t.row];i=this.data.pull[t.row];p(i.empresaId).then((function(t){if(t.infFacCliRep){var e="/stireport/reports/"+t.infFacCliRep+".mrt";r.$scope.imprimirWindow.showWindow(i.facturaId,e)}else s.a.errorMessage("Esta empresa no tiene plantilla de factura asociada")})).catch((function(t){-1!=t.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?s.a.errorRestriccion():s.a.errorMessageAjax(t)}))}))},e.prototype.urlChange=function(t,e){var n=i.a.checkLoggedUser(),r=!1,o=n.comercialId;n.esCliente&&(r=!0,o=n.clienteId),c.languageService.setLanguage(this.app,"es"),this.load(r,o)},e.prototype.load=function(t,e){var n=this;a(t,e,7).then((function(t){t||(t=[]),t=n.formateaCampos(t),$$("facturasGrid").clearAll(),$$("facturasGrid").parse(u("facturaId",t));var e=$$("facturasGrid").count();$$("facturasNReg").config.label="NREG: "+e,$$("facturasNReg").refresh();var r=webix.storage.local.get("stateGridFacturas");r&&n.$$("facturasGrid").setState(r)})).catch((function(t){-1!=t.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?s.a.errorRestriccion():s.a.errorMessageAjax(t)}))},e.prototype.formateaCampos=function(t){return t.forEach((function(t){t.emisorNombre=t.emisorNombre.substr(0,3),t.fecha=new Date(t.fecha)})),t},e.prototype.cleanAndload=function(){$$("facturasGrid").eachColumn((function(t,e){if("actions"!=e.id){var n=this.getFilter(t);n&&(n.setValue?n.setValue(""):n.value="")}})),this.load()},e.prototype.print=function(){},e}(r.c);e.default=d},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(3),o=n(0),a=function(t,e){return new webix.promise((function(n,r){o.a.getConfig().then((function(n){var r=n.urlApi+"/api/clientes/activo/login",i={cliente:{login:t,password:e}};return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(r,i)})).then((function(t){n(t.json())})).catch((function(t){r(t)}))}))},s=function(t,e){return new webix.promise((function(n,r){o.a.getConfig().then((function(n){var r=n.urlApi+"/api/comerciales/login",i={login:t,password:e};return webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(r,i)})).then((function(t){n(t.json())})).catch((function(t){r(t)}))}))},u=n(2);function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var f=function(t){function e(){return c(this,e),p(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){return{view:"layout",css:"loginBack",rows:[{},{cols:[{},{rows:[{view:"form",width:300,css:"round-border",id:"frmLogin",elements:[{view:"label",height:100,align:"center",label:"<img src='assets/img/logo.png'/>"},{view:"label",align:"center",id:"version",label:"VRS"},{view:"text",name:"login",required:!0,label:"Usuario",labelPosition:"top"},{view:"text",type:"password",name:"password",required:!0,label:"Contraseña",labelPosition:"top"},{margin:5,cols:[{view:"button",label:"Aceptar",click:this.accept,type:"form",hotkey:"enter"},{view:"button",label:"Cancelar",click:this.cancel,hotkey:"esc"}]}]}]},{}]},{}]}},e.prototype.init=function(){o.a.getVersion().then((function(t){$$("version").data.label="VRS "+t.version,$$("version").refresh()})).catch((function(t){-1!=t.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?u.a.errorRestriccion():u.a.errorMessageAjax(t)}))},e.prototype.cancel=function(){},e.prototype.accept=function(){var t=this;if($$("frmLogin").validate()){var e=void 0,n=$$("frmLogin").getValues();a(n.login,n.password).then((function(r){r?((e=r).esCliente=!0,i.a.setUsuarioCookie(e),t.$scope.show("top/inicio")):s(n.login,n.password).then((function(n){n&&((e=n).esCliente=!1,i.a.setUsuarioCookie(e),t.$scope.show("top/inicio"))})).catch((function(t){-1!=t.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?u.a.errorRestriccion():u.a.errorMessageAjax(t)}))})).catch((function(t){-1!=t.response.indexOf("Cannot delete or update a parent row: a foreign key constraint fails")?u.a.errorRestriccion():u.a.errorMessageAjax(t)}))}else u.a.errorMessage("Debe rellenar los campos correctamente")},e}(r.c);e.default=f},function(t,e,n){"use strict";n.r(e);var r=n(1),i=new webix.DataCollection({data:[{id:1,title:"The Shawshank Redemption",year:1994,votes:678790,rating:9.2,rank:1},{id:2,title:"The Godfather",year:1972,votes:511495,rating:9.2,rank:2},{id:3,title:"The Godfather: Part II",year:1974,votes:319352,rating:9,rank:3},{id:4,title:"The Good, the Bad and the Ugly",year:1966,votes:213030,rating:8.9,rank:4},{id:5,title:"My Fair Lady",year:1964,votes:533848,rating:8.9,rank:5},{id:6,title:"12 Angry Men",year:1957,votes:164558,rating:8.9,rank:6}]});function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var s=function(t){function e(){return o(this,e),a(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){return{view:"datatable",autoConfig:!0,css:"webix_shadow_medium"}},e.prototype.init=function(t){t.parse(i)},e}(r.c);e.default=s},function(t,e,n){"use strict";n.r(e);n(21);var r=n(1),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var o=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o={id:"REPCLIENTES",version:"1.1.0",router:r.a,debug:!1,start:"/login"};return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i({},o,n)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.b);e.default=o,webix.ready((function(){var t=new o;t.use(r.d.Locale),t.use(r.d.Theme),webix.i18n.setLocale("es-ES"),t.render(),t.getService("theme").setTheme("compact-default")}))},function(t,e,n){},function(t,e,n){var r={"./data":19,"./data.js":19,"./facturas":17,"./facturas.js":17,"./facturasEpisReport":6,"./facturasEpisReport.js":6,"./imprimirWindow":10,"./imprimirWindow.js":10,"./inicio":11,"./inicio.js":11,"./login":18,"./login.js":18,"./mainFooter":9,"./mainFooter.js":9,"./mainMenu":7,"./mainMenu.js":7,"./mainToolbar":8,"./mainToolbar.js":8,"./start":12,"./start.js":12,"./top":13,"./top.js":13};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=22},function(t,e,n){var r={"./en":14,"./en.js":14,"./es":15,"./es.js":15,"./fr.":16,"./fr..js":16,"./language_service":4,"./language_service.js":4};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=23}]);